  [1m[36m (1.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.3ms)[0m  select sqlite_version(*)
  [1m[36m (1.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateOrganisations (20151204154935)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateOrganisations (20151204154935)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151204154935"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseCreateUsers (20151204163514)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "first_name" varchar, "last_name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.3ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.2ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151204163514"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'trypio00@gmail.com' LIMIT 1
  [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["first_name", "Timi"], ["last_name", "Ajiboye"], ["email", "trypio00@gmail.com"], ["encrypted_password", "$2a$10$UQOEj01YAtI.k4XPsmtS1.5iv85/p32iqHx2hgHXgTT30QIc31Hw."], ["created_at", "2015-12-05 11:12:45.244501"], ["updated_at", "2015-12-05 11:12:45.244501"]]
  [1m[35m (2.5ms)[0m  commit transaction


Started GET "/dashboard/v1/users/1" for ::1 at 2015-12-05 12:14:54 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActionController::RoutingError (No route matches [GET] "/dashboard/v1/users/1"):
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_table.html.erb (16.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (111.9ms)


Started GET "/dashboard/users/1" for ::1 at 2015-12-05 12:15:18 +0100

AbstractController::ActionNotFound (The action 'show' could not be found for Dashboard::V1::UsersController):
  actionpack (4.2.4) lib/abstract_controller/base.rb:132:in `process'
  actionview (4.2.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.4) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.4) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.4) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:76:in `call'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:76:in `dispatch'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:45:in `serve'
  actionpack (4.2.4) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.4) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.4) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:821:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  activerecord (4.2.4) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.4) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/unknown_action.html.erb within rescues/layout (0.3ms)


Started GET "/dashboard/users/1" for ::1 at 2015-12-05 12:16:06 +0100
Processing by Dashboard::V1::UsersController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 500 Internal Server Error in 33ms (ActiveRecord: 0.9ms)

NoMethodError (undefined method `default_render' for #<Dashboard::V1::UsersController:0x007f97a16e90c0>):
  app/controllers/dashboard/v1/users_controller.rb:5:in `show'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (52.4ms)


Started GET "/dashboard/users/1" for ::1 at 2015-12-05 12:18:54 +0100
Processing by Dashboard::V1::UsersController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 16ms (ActiveRecord: 1.0ms)

NoMethodError (undefined method `default_render' for #<Dashboard::V1::UsersController:0x007f97a41c00a0>):
  app/controllers/dashboard/v1/users_controller.rb:5:in `show'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (55.7ms)


Started GET "/dashboard/users/1" for ::1 at 2015-12-05 12:19:09 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Dashboard::V1::UsersController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 500 Internal Server Error in 58ms (ActiveRecord: 1.0ms)

NoMethodError (undefined method `default_render' for #<Dashboard::V1::UsersController:0x007fed64a45d68>):
  app/controllers/dashboard/v1/users_controller.rb:5:in `show'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (60.3ms)


Started GET "/dashboard/users/1" for ::1 at 2015-12-05 12:19:57 +0100

ActionController::RoutingError (The controller-level `respond_to' feature has been extracted to the `responders` gem. Add it to your Gemfile to continue using this feature:
  gem 'responders', '~> 2.0'
Consult the Rails upgrade guide for details.):
  app/controllers/dashboard/v1/users_controller.rb:6:in `<class:UsersController>'
  app/controllers/dashboard/v1/users_controller.rb:1:in `<top (required)>'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_table.html.erb (9.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (84.9ms)


Started GET "/dashboard/users/1" for ::1 at 2015-12-05 12:22:59 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActionController::RoutingError (The controller-level `respond_to' feature has been extracted to the `responders` gem. Add it to your Gemfile to continue using this feature:
  gem 'responders', '~> 2.0'
Consult the Rails upgrade guide for details.):
  app/controllers/dashboard/v1/users_controller.rb:6:in `<class:UsersController>'
  app/controllers/dashboard/v1/users_controller.rb:1:in `<top (required)>'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_table.html.erb (5.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (84.3ms)


Started GET "/dashboard/users/1" for ::1 at 2015-12-05 12:23:12 +0100
Processing by Dashboard::V1::UsersController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 31ms (Views: 1.4ms | ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "organisations" ("organisation_name", "primary_user", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["organisation_name", "Helloworld"], ["primary_user", 1], ["email", "timi@helloworld.ng"], ["phone", "08028618180"], ["created_at", "2015-12-05 11:40:45.192528"], ["updated_at", "2015-12-05 11:40:45.192528"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to ChangePrimaryUserToPrimaryUserId (20151205114111)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to ChangePrimaryUserToPrimaryUserId (20151205114111)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mCREATE TEMPORARY TABLE "aorganisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user_id" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "organisations"
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "aorganisations" ("id","organisation_name","primary_user_id","email","client_key","phone","created_at","updated_at") VALUES (1, 'Helloworld', 1, 'timi@helloworld.ng', NULL, '08028618180', '2015-12-05 11:40:45.192528', '2015-12-05 11:40:45.192528')[0m
  [1m[35m (1.4ms)[0m  DROP TABLE "organisations"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user_id" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "aorganisations"
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "organisations" ("id","organisation_name","primary_user_id","email","client_key","phone","created_at","updated_at") VALUES (1, 'Helloworld', 1, 'timi@helloworld.ng', NULL, '08028618180', '2015-12-05 11:40:45.192528', '2015-12-05 11:40:45.192528')[0m
  [1m[35m (0.3ms)[0m  DROP TABLE "aorganisations"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151205114111"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m


Started GET "/dashboard/organisations/1" for ::1 at 2015-12-05 12:42:31 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActionController::RoutingError (No route matches [GET] "/dashboard/organisations/1"):
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (60.1ms)


Started GET "/dashboard/organisations/1" for ::1 at 2015-12-05 12:42:54 +0100

ActionController::RoutingError (No route matches [GET] "/dashboard/organisations/1"):
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (62.9ms)


Started GET "/dashboard/organisations/1" for ::1 at 2015-12-05 12:43:09 +0100
Processing by Dashboard::V1::OrganisationsController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[35mOrganisation Load (0.6ms)[0m  SELECT  "organisations".* FROM "organisations" WHERE "organisations"."id" = ? LIMIT 1  [["id", 1]]
Completed 200 OK in 24ms (Views: 1.6ms | ActiveRecord: 2.0ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 12:52:27 +0100

ArgumentError (Unknown key: :as. Valid keys are: :class_name, :anonymous_class, :foreign_key, :validate, :autosave, :dependent, :primary_key, :inverse_of, :required, :foreign_type, :polymorphic, :touch, :counter_cache):
  app/models/user.rb:7:in `<class:User>'
  app/models/user.rb:1:in `<top (required)>'
  config/routes.rb:2:in `block in <top (required)>'
  config/routes.rb:1:in `<top (required)>'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (49.0ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 12:52:58 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "organisations" ("organisation_name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["created_at", "2015-12-05 11:52:58.621372"], ["updated_at", "2015-12-05 11:52:58.621372"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
Unpermitted parameters: organisation_name, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$2N8B3zLOp7suhIE5F80soO2j9dQWa4N.FECqE0qlg0yMT7a2a/25y"], ["created_at", "2015-12-05 11:52:58.728478"], ["updated_at", "2015-12-05 11:52:58.728478"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
Completed 500 Internal Server Error in 126ms (ActiveRecord: 5.6ms)

NoMethodError (undefined method `primary_user=' for #<Organisation:0x007ff8589087f8>):
  app/controllers/dashboard/v1/organisations_controller.rb:14:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (44.4ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 12:54:15 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["created_at", "2015-12-05 11:54:15.598242"], ["updated_at", "2015-12-05 11:54:15.598242"]]
  [1m[35m (1.5ms)[0m  commit transaction
Unpermitted parameters: organisation_name, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 105ms (ActiveRecord: 3.2ms)

NoMethodError (undefined method `primary_user=' for #<Organisation:0x007ff8561c2db0>):
  app/controllers/dashboard/v1/organisations_controller.rb:14:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (46.2ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 12:54:23 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["created_at", "2015-12-05 11:54:23.144685"], ["updated_at", "2015-12-05 11:54:23.144685"]]
  [1m[35m (1.9ms)[0m  commit transaction
Unpermitted parameters: organisation_name, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 74ms (ActiveRecord: 2.5ms)

NoMethodError (undefined method `primary_user=' for #<Organisation:0x007ff8557a4310>):
  app/controllers/dashboard/v1/organisations_controller.rb:14:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.4ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (43.8ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 12:57:28 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["created_at", "2015-12-05 11:57:28.616115"], ["updated_at", "2015-12-05 11:57:28.616115"]]
  [1m[35m (2.1ms)[0m  commit transaction
Unpermitted parameters: organisation_name, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 93ms (ActiveRecord: 3.5ms)

NoMethodError (undefined method `primary_user=' for #<Organisation:0x007ff8589c8350>):
  app/controllers/dashboard/v1/organisations_controller.rb:14:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (57.4ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 12:57:51 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["created_at", "2015-12-05 11:57:51.877817"], ["updated_at", "2015-12-05 11:57:51.877817"]]
  [1m[35m (1.6ms)[0m  commit transaction
Unpermitted parameters: organisation_name, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 100ms (ActiveRecord: 3.7ms)

NoMethodError (undefined method `primary_user=' for #<Organisation:0x007ff8540f6ff0>):
  app/controllers/dashboard/v1/organisations_controller.rb:14:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (57.9ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 12:58:01 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["created_at", "2015-12-05 11:58:01.516203"], ["updated_at", "2015-12-05 11:58:01.516203"]]
  [1m[35m (1.6ms)[0m  commit transaction
Unpermitted parameters: organisation_name, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 102ms (ActiveRecord: 3.6ms)

NoMethodError (undefined method `primary_user=' for #<Organisation:0x007ff85575f710>):
  app/controllers/dashboard/v1/organisations_controller.rb:14:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (50.5ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 12:59:22 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-05 11:59:22.561120"], ["updated_at", "2015-12-05 11:59:22.561120"]]
  [1m[35m (0.7ms)[0m  commit transaction
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 92ms (ActiveRecord: 2.2ms)

NoMethodError (undefined method `primary_user' for #<Organisation:0x007ff858851620>):
  app/controllers/dashboard/v1/organisations_controller.rb:14:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (40.4ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 12:59:39 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-05 11:59:39.461599"], ["updated_at", "2015-12-05 11:59:39.461599"]]
  [1m[35m (1.4ms)[0m  commit transaction
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 97ms (ActiveRecord: 3.0ms)

ActionView::MissingTemplate (Missing template dashboard/v1/organisations/create with {:locale=>[:en], :formats=>[:json], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby]}. Searched in:
  * "/Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/devise-3.5.2/app/views"
):
  actionview (4.2.4) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.4) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.4) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.4) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.4) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.4) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.4) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.4) lib/action_view/rendering.rb:100:in `_render_template'
  actionview (4.2.4) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.4) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.4) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.4) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.4) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.4) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.2.4) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.4) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.4) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.4) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.4) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.4) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.4) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.4) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  activerecord (4.2.4) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.4) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.4) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.4) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.4) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:76:in `call'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:76:in `dispatch'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:45:in `serve'
  actionpack (4.2.4) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.4) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.4) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:821:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  activerecord (4.2.4) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.4) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/missing_template.html.erb within rescues/layout (48.9ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 12:59:54 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-05 11:59:54.123832"], ["updated_at", "2015-12-05 11:59:54.123832"]]
  [1m[35m (1.9ms)[0m  commit transaction
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 101ms (ActiveRecord: 5.1ms)

NoMethodError (undefined method `organisation_url' for #<Dashboard::V1::OrganisationsController:0x007ff858b489c8>):
  app/controllers/dashboard/v1/organisations_controller.rb:15:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (49.9ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 13:00:32 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-05 12:00:32.165490"], ["updated_at", "2015-12-05 12:00:32.165490"]]
  [1m[35m (2.5ms)[0m  commit transaction
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 84ms (ActiveRecord: 3.2ms)

NoMethodError (undefined method `organisation_url' for #<Dashboard::V1::OrganisationsController:0x007ff853b5d0d0>):
  app/controllers/dashboard/v1/organisations_controller.rb:15:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (47.6ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 13:02:13 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-05 12:02:13.260067"], ["updated_at", "2015-12-05 12:02:13.260067"]]
  [1m[35m (1.4ms)[0m  commit transaction
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$6va7fZbqx/lrXcYte0vXK.IAkYcjXbs6uIyqb8tkIEnrQZG1k6GEK"], ["created_at", "2015-12-05 12:02:13.347835"], ["updated_at", "2015-12-05 12:02:13.347835"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "organisations" SET "primary_user_id" = ?, "updated_at" = ? WHERE "organisations"."id" = ?  [["primary_user_id", 3], ["updated_at", "2015-12-05 12:02:13.351623"], ["id", 12]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
Completed 500 Internal Server Error in 111ms (ActiveRecord: 6.7ms)

NoMethodError (undefined method `organisation_url' for #<Dashboard::V1::OrganisationsController:0x007ff8552a2088>):
  app/controllers/dashboard/v1/organisations_controller.rb:15:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (48.4ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 13:07:36 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-05 12:07:36.658763"], ["updated_at", "2015-12-05 12:07:36.658763"]]
  [1m[35m (2.1ms)[0m  commit transaction
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."primary_user" = ? LIMIT 1  [[nil, 13]]
SQLite3::SQLException: no such column: users.primary_user: SELECT  "users".* FROM "users" WHERE "users"."primary_user" = ? LIMIT 1
Completed 500 Internal Server Error in 106ms (ActiveRecord: 3.9ms)

ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: users.primary_user: SELECT  "users".* FROM "users" WHERE "users"."primary_user" = ? LIMIT 1):
  app/controllers/dashboard/v1/organisations_controller.rb:14:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (52.0ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 13:08:45 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-05 12:08:45.467155"], ["updated_at", "2015-12-05 12:08:45.467155"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 500 Internal Server Error in 96ms (ActiveRecord: 3.6ms)

ActiveModel::MissingAttributeError (can't write unknown attribute `primary_user`):
  app/controllers/dashboard/v1/organisations_controller.rb:14:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (50.1ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 13:09:04 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-05 12:09:04.950427"], ["updated_at", "2015-12-05 12:09:04.950427"]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 500 Internal Server Error in 99ms (ActiveRecord: 3.0ms)

ActiveModel::MissingAttributeError (can't write unknown attribute `primary_user`):
  app/controllers/dashboard/v1/organisations_controller.rb:14:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (50.2ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 13:10:00 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-05 12:10:00.529819"], ["updated_at", "2015-12-05 12:10:00.529819"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  commit transaction
Completed 500 Internal Server Error in 141ms (ActiveRecord: 6.0ms)

NoMethodError (undefined method `organisation_url' for #<Dashboard::V1::OrganisationsController:0x007ff8554b0fa0>):
  app/controllers/dashboard/v1/organisations_controller.rb:15:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (64.6ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 13:10:45 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-05 12:10:45.113056"], ["updated_at", "2015-12-05 12:10:45.113056"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
Completed 500 Internal Server Error in 105ms (ActiveRecord: 4.1ms)

NoMethodError (undefined method `organisation_url' for #<Dashboard::V1::OrganisationsController:0x007ff858b213f0>):
  app/controllers/dashboard/v1/organisations_controller.rb:15:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (48.8ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 13:12:40 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-05 12:12:40.759670"], ["updated_at", "2015-12-05 12:12:40.759670"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$1wPmWsoAQp2f0Znaz4XY9u9cRZAdMx3veGfKMpGtbauweenrWLh9O"], ["created_at", "2015-12-05 12:12:40.844332"], ["updated_at", "2015-12-05 12:12:40.844332"]]
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "organisations" SET "primary_user_id" = ?, "updated_at" = ? WHERE "organisations"."id" = ?[0m  [["primary_user_id", 4], ["updated_at", "2015-12-05 12:12:40.848516"], ["id", 18]]
  [1m[35m (1.3ms)[0m  commit transaction
Completed 500 Internal Server Error in 110ms (ActiveRecord: 7.5ms)

NoMethodError (undefined method `organisation_url' for #<Dashboard::V1::OrganisationsController:0x007ff8589338e0>):
  app/controllers/dashboard/v1/organisations_controller.rb:15:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (50.2ms)


Started GET "/dashboard/organisations/1" for ::1 at 2015-12-05 13:13:41 +0100
Processing by Dashboard::V1::OrganisationsController#show as JSON
  Parameters: {"id"=>"1"}
  [1m[36mOrganisation Load (0.1ms)[0m  [1mSELECT  "organisations".* FROM "organisations" WHERE "organisations"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 12ms (Views: 0.6ms | ActiveRecord: 0.5ms)


Started GET "/dashboard/organisations/2" for ::1 at 2015-12-05 13:13:49 +0100
Processing by Dashboard::V1::OrganisationsController#show as JSON
  Parameters: {"id"=>"2"}
  [1m[35mOrganisation Load (0.1ms)[0m  SELECT  "organisations".* FROM "organisations" WHERE "organisations"."id" = ? LIMIT 1  [["id", 2]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.1ms)

ActiveRecord::RecordNotFound (Couldn't find Organisation with 'id'=2):
  app/controllers/dashboard/v1/organisations_controller.rb:6:in `show'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (41.3ms)


Started GET "/dashboard/organisations/18" for ::1 at 2015-12-05 13:14:04 +0100
Processing by Dashboard::V1::OrganisationsController#show as JSON
  Parameters: {"id"=>"18"}
  [1m[36mOrganisation Load (0.1ms)[0m  [1mSELECT  "organisations".* FROM "organisations" WHERE "organisations"."id" = ? LIMIT 1[0m  [["id", 18]]
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 0.1ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 13:15:28 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-05 12:15:28.670963"], ["updated_at", "2015-12-05 12:15:28.670963"]]
  [1m[35m (1.7ms)[0m  commit transaction
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
Completed 500 Internal Server Error in 109ms (ActiveRecord: 3.8ms)

NoMethodError (undefined method `organisation_url' for #<Dashboard::V1::OrganisationsController:0x007ff8561523d0>):
  app/controllers/dashboard/v1/organisations_controller.rb:13:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (48.2ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddOrganisationIdToUsers (20151205133938)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "organisation_id" integer[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151205133938"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'



Started POST "/dashboard/organisations" for ::1 at 2015-12-05 14:46:33 +0100
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 96ms (Views: 0.2ms | ActiveRecord: 0.9ms)

AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  app/controllers/dashboard/v1/organisations_controller.rb:19:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (8.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (66.2ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 14:46:42 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 200 OK in 108ms (Views: 0.2ms | ActiveRecord: 3.1ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 14:48:59 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 98ms (ActiveRecord: 1.3ms)

NoMethodError (undefined method `errors' for #<String:0x007ff8552a2e70>):
  app/controllers/dashboard/v1/organisations_controller.rb:16:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (52.8ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 14:49:14 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 200 OK in 95ms (Views: 0.1ms | ActiveRecord: 1.0ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 14:49:45 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 200 OK in 97ms (Views: 0.2ms | ActiveRecord: 1.3ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 14:52:13 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 200 OK in 103ms (Views: 0.2ms | ActiveRecord: 1.1ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 14:55:54 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 200 OK in 72ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-05 14:58:24 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Completed 200 OK in 88ms (Views: 0.1ms | ActiveRecord: 0.9ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:41:01 +0100
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 200 OK in 219ms (Views: 1.8ms | ActiveRecord: 2.3ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:41:34 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 200 OK in 104ms (Views: 0.3ms | ActiveRecord: 2.1ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:42:43 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 200 OK in 102ms (Views: 0.8ms | ActiveRecord: 1.5ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:42:53 +0100
  [1m[36mActiveRecord::SchemaMigration Load (4.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
Completed 200 OK in 177ms (Views: 0.8ms | ActiveRecord: 1.2ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:43:26 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 200 OK in 94ms (Views: 0.4ms | ActiveRecord: 0.9ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:43:57 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 200 OK in 80ms (Views: 0.2ms | ActiveRecord: 1.3ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:45:04 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 200 OK in 126ms (Views: 0.2ms | ActiveRecord: 2.0ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:46:45 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 500 Internal Server Error in 126ms (ActiveRecord: 1.3ms)

NameError (undefined local variable or method `msg' for #<Dashboard::V1::OrganisationsController:0x007ffeb250d2b0>):
  app/controllers/dashboard/v1/organisations_controller.rb:28:in `block in combined_errors'
  app/controllers/dashboard/v1/organisations_controller.rb:27:in `each'
  app/controllers/dashboard/v1/organisations_controller.rb:27:in `combined_errors'
  app/controllers/dashboard/v1/organisations_controller.rb:16:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (68.8ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:46:59 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 200 OK in 106ms (Views: 0.2ms | ActiveRecord: 2.1ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:47:22 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 500 Internal Server Error in 121ms (ActiveRecord: 1.3ms)

NoMethodError (undefined method `<<' for #<ActiveModel::Errors:0x007ffeb4e76d18>):
  app/controllers/dashboard/v1/organisations_controller.rb:28:in `block in combined_errors'
  app/controllers/dashboard/v1/organisations_controller.rb:27:in `each'
  app/controllers/dashboard/v1/organisations_controller.rb:27:in `combined_errors'
  app/controllers/dashboard/v1/organisations_controller.rb:16:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (51.6ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:47:41 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 200 OK in 104ms (Views: 0.2ms | ActiveRecord: 2.2ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:48:24 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 200 OK in 112ms (Views: 0.2ms | ActiveRecord: 1.7ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:48:47 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 200 OK in 105ms (Views: 0.2ms | ActiveRecord: 2.6ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:49:33 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 200 OK in 99ms (Views: 0.2ms | ActiveRecord: 1.4ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:49:46 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$EMhyN2uTNuBejEMKXUJlDOVrYSJTWgIJrai6IMIjcO9AfbvFAOZIa"], ["created_at", "2015-12-06 02:49:46.393952"], ["updated_at", "2015-12-06 02:49:46.393952"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  rollback transaction
Completed 200 OK in 82ms (Views: 0.7ms | ActiveRecord: 3.6ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:49:57 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
Completed 200 OK in 81ms (Views: 0.4ms | ActiveRecord: 0.9ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:50:21 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 200 OK in 111ms (Views: 0.2ms | ActiveRecord: 1.3ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:50:46 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$mX6pWQjEweaNhtCdaOHglOdMJEQ00OYRo3mRpOFKuAfUHX2uhMESW"], ["created_at", "2015-12-06 02:50:46.906869"], ["updated_at", "2015-12-06 02:50:46.906869"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 200 OK in 83ms (Views: 0.2ms | ActiveRecord: 2.4ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:50:56 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 200 OK in 77ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:51:17 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
Completed 200 OK in 78ms (Views: 0.3ms | ActiveRecord: 0.5ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:51:52 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.6ms)

NoMethodError (undefined method `errors' for nil:NilClass):
  app/controllers/dashboard/v1/organisations_controller.rb:27:in `combined_errors'
  app/controllers/dashboard/v1/organisations_controller.rb:16:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (61.6ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:52:06 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 200 OK in 120ms (Views: 0.2ms | ActiveRecord: 1.1ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:52:47 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$HS7q9nz6AsGjedCFR5ql8OPbI/bmDHAgk2O3nttBHppjapo/cyZnS"], ["created_at", "2015-12-06 02:52:47.952370"], ["updated_at", "2015-12-06 02:52:47.952370"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 200 OK in 84ms (Views: 0.2ms | ActiveRecord: 3.6ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 03:54:48 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 200 OK in 99ms (Views: 0.2ms | ActiveRecord: 1.1ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddDeletedAtToOrganisationsAndUsers (20151206030525)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "organsations" ADD "deleted_at" datetime[0m
SQLite3::SQLException: no such table: organsations: ALTER TABLE "organsations" ADD "deleted_at" datetime
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddDeletedAtToOrganisationsAndUsers (20151206030525)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.7ms)[0m  [1mALTER TABLE "organisations" ADD "deleted_at" datetime[0m
  [1m[35m (1.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "users" ADD "deleted_at" datetime
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_users_on_deleted_at" ON "users" ("deleted_at")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206030525"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddIndexesToOrganisationsAndUsers (20151206030931)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.3ms)[0m  [1mCREATE  INDEX "index_users_on_organisation_id" ON "users" ("organisation_id")[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_organsations_on_primary_user_id" ON "organsations" ("primary_user_id")
SQLite3::SQLException: no such table: main.organsations: CREATE  INDEX "index_organsations_on_primary_user_id" ON "organsations" ("primary_user_id")
  [1m[36m (1.2ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddIndexesToOrganisationsAndUsers (20151206030931)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.3ms)[0m  [1mCREATE  INDEX "index_users_on_organisation_id" ON "users" ("organisation_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_organisations_on_primary_user_id" ON "organisations" ("primary_user_id")[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206030931"]]
  [1m[36m (0.9ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.9ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.5ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'



Started POST "/dashboard/organisations" for ::1 at 2015-12-06 04:11:46 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35mSQL (2.5ms)[0m  INSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$UDec7bTQKtNtV9oY4xB8h.v.yrbvqiOYsJ61jJ.K/dEBtdyZIda2m"], ["created_at", "2015-12-06 03:11:47.181539"], ["updated_at", "2015-12-06 03:11:47.181539"]]
  [1m[36m (2.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 194ms (Views: 0.3ms | ActiveRecord: 7.3ms)

NoMethodError (undefined method `really_destroy!' for #<User:0x007fa0a02de900>):
  app/controllers/dashboard/v1/organisations_controller.rb:17:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (58.8ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 04:11:54 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 500 Internal Server Error in 78ms (Views: 0.2ms | ActiveRecord: 0.6ms)

NoMethodError (undefined method `really_destroy!' for #<User:0x007fa09cd4c0f8>):
  app/controllers/dashboard/v1/organisations_controller.rb:17:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (48.4ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 04:14:15 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'timi@ordertolagos.com' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 120ms (Views: 0.3ms | ActiveRecord: 1.3ms)

NoMethodError (undefined method `really_destroy!' for #<User:0x007fa09bd507d0>):
  app/controllers/dashboard/v1/organisations_controller.rb:17:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (65.2ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 04:16:42 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."email" = 'timi@ordertolagos.com' AND "users"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$bA1S3fwTVS99njrLEB1RUuCMfwiqnfWEEFVAU6EHdgXCkdjmRWbSK"], ["created_at", "2015-12-06 03:16:42.838092"], ["updated_at", "2015-12-06 03:16:42.838092"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 9]]
  [1m[35m (1.6ms)[0m  commit transaction
Completed 200 OK in 110ms (Views: 0.1ms | ActiveRecord: 5.1ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 04:17:32 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180", "organisation_name"=>"Ordertolagos"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, organisation_name, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE ("users"."email" = 'timi@ordertolagos.com' AND "users"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["organisation_name", "Ordertolagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-06 03:17:32.828782"], ["updated_at", "2015-12-06 03:17:32.828782"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "organisation_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$jIkw/b/arBwKTbchixQ4vO03cC5DTQhQMog1WkJs2W1Ffz4sYlytK"], ["organisation_id", 20], ["created_at", "2015-12-06 03:17:32.832295"], ["updated_at", "2015-12-06 03:17:32.832295"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "organisations" SET "primary_user_id" = ?, "updated_at" = ? WHERE "organisations"."id" = ?[0m  [["primary_user_id", 10], ["updated_at", "2015-12-06 03:17:32.841120"], ["id", 20]]
  [1m[35m (1.5ms)[0m  commit transaction
Completed 500 Internal Server Error in 87ms (ActiveRecord: 6.3ms)

ActionController::UrlGenerationError (No route matches {:action=>"show", :controller=>"dashboard/v1/organisations", :format=>:json} missing required keys: [:id]):
  app/controllers/dashboard/v1/organisations_controller.rb:14:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (4.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (63.7ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 04:23:15 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180", "organisation_name"=>"Ordertolagos"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, organisation_name, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE ("users"."email" = 'timi@ordertolagos.com' AND "users"."deleted_at" IS NULL) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
Completed 200 OK in 92ms (Views: 0.2ms | ActiveRecord: 1.3ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 04:23:29 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@devcenter.co", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180", "organisation_name"=>"Ordertolagos"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, organisation_name, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."email" = 'timi@devcenter.co' AND "users"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mOrganisation Exists (0.2ms)[0m  SELECT  1 AS one FROM "organisations" WHERE "organisations"."organisation_name" = 'Ordertolagos' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@devcenter.co"], ["encrypted_password", "$2a$10$z9zQrzcrxW.UfN/BiER/ROLmsQ7SZaZNv.ERvwW8HsvF6SR0t8LiG"], ["created_at", "2015-12-06 03:23:29.896231"], ["updated_at", "2015-12-06 03:23:29.896231"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrganisation Exists (0.1ms)[0m  SELECT  1 AS one FROM "organisations" WHERE "organisations"."organisation_name" = 'Ordertolagos' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = ?[0m  [["id", 11]]
  [1m[35m (1.9ms)[0m  commit transaction
Completed 200 OK in 87ms (Views: 0.2ms | ActiveRecord: 5.8ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 04:24:07 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@devcenter.co", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180", "organisation_name"=>"Devcenter"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, organisation_name, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE ("users"."email" = 'timi@devcenter.co' AND "users"."deleted_at" IS NULL) LIMIT 1
  [1m[36mOrganisation Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "organisations" WHERE "organisations"."organisation_name" = 'Devcenter' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["organisation_name", "Devcenter"], ["email", "timi@devcenter.co"], ["phone", "08028618180"], ["created_at", "2015-12-06 03:24:07.569291"], ["updated_at", "2015-12-06 03:24:07.569291"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "organisation_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@devcenter.co"], ["encrypted_password", "$2a$10$zvlFqLuEAQ6pEzv7XE8jkuSRXsz4673o0QVqBArS61/6ZksZ/ip06"], ["organisation_id", 21], ["created_at", "2015-12-06 03:24:07.570818"], ["updated_at", "2015-12-06 03:24:07.570818"]]
  [1m[35m (1.9ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mOrganisation Exists (0.1ms)[0m  SELECT  1 AS one FROM "organisations" WHERE ("organisations"."organisation_name" = 'Devcenter' AND "organisations"."id" != 21) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM "organisations" WHERE ("organisations"."organisation_name" = 'Devcenter' AND "organisations"."id" != 21) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "organisations" SET "primary_user_id" = ?, "updated_at" = ? WHERE "organisations"."id" = ?  [["primary_user_id", 12], ["updated_at", "2015-12-06 03:24:07.581074"], ["id", 21]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
Completed 500 Internal Server Error in 99ms (ActiveRecord: 5.0ms)

ActionController::UrlGenerationError (No route matches {:action=>"show", :controller=>"dashboard/v1/organisations", :format=>:json} missing required keys: [:id]):
  app/controllers/dashboard/v1/organisations_controller.rb:14:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (67.4ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 04:25:58 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@devcenter.co", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180", "organisation_name"=>"Devcenter"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, organisation_name, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."email" = 'timi@devcenter.co' AND "users"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mOrganisation Exists (0.1ms)[0m  SELECT  1 AS one FROM "organisations" WHERE "organisations"."organisation_name" = 'Devcenter' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["organisation_name", "Devcenter"], ["email", "timi@devcenter.co"], ["phone", "08028618180"], ["created_at", "2015-12-06 03:25:58.279471"], ["updated_at", "2015-12-06 03:25:58.279471"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "organisation_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@devcenter.co"], ["encrypted_password", "$2a$10$8hZSRz.X8/zbJwyTj6mcNO7KeMgsmjYtVARYCJhpj3ofvTaUkZ0U2"], ["organisation_id", 22], ["created_at", "2015-12-06 03:25:58.280916"], ["updated_at", "2015-12-06 03:25:58.280916"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrganisation Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "organisations" WHERE ("organisations"."organisation_name" = 'Devcenter' AND "organisations"."id" != 22) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  1 AS one FROM "organisations" WHERE ("organisations"."organisation_name" = 'Devcenter' AND "organisations"."id" != 22) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "organisations" SET "primary_user_id" = ?, "updated_at" = ? WHERE "organisations"."id" = ?[0m  [["primary_user_id", 13], ["updated_at", "2015-12-06 03:25:58.286942"], ["id", 22]]
  [1m[35m (1.6ms)[0m  commit transaction
Completed 201 Created in 107ms (Views: 0.5ms | ActiveRecord: 5.6ms)


Started POST "/dashboard/users" for ::1 at 2015-12-06 04:38:59 +0100
Processing by Dashboard::V1::UsersController#create as JSON
  Parameters: {"email"=>"tola@devcenter.co", "password"=>"[FILTERED]", "first_name"=>"Tola", "last_name"=>"Badman", "organisation_id"=>"13"}
Unpermitted parameter: format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE ("users"."email" = 'tola@devcenter.co' AND "users"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "organisation_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "Tola"], ["last_name", "Badman"], ["email", "tola@devcenter.co"], ["encrypted_password", "$2a$10$/XbTHHbbxLSFtUIopJMQcOdr.5P3eb8OOTUuGk8SqEoKDZNiTD24q"], ["organisation_id", 13], ["created_at", "2015-12-06 03:38:59.508381"], ["updated_at", "2015-12-06 03:38:59.508381"]]
  [1m[35m (1.5ms)[0m  commit transaction
Completed 500 Internal Server Error in 85ms (ActiveRecord: 2.5ms)

ArgumentError (wrong number of arguments (3 for 0..2)):
  app/controllers/dashboard/v1/users_controller.rb:12:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (53.3ms)


Started POST "/dashboard/users" for ::1 at 2015-12-06 04:39:38 +0100
Processing by Dashboard::V1::UsersController#create as JSON
  Parameters: {"email"=>"tola@devcenter.co", "password"=>"[FILTERED]", "first_name"=>"Tola", "last_name"=>"Badman", "organisation_id"=>"13"}
Unpermitted parameter: format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE ("users"."email" = 'tola@devcenter.co' AND "users"."deleted_at" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 422 Unprocessable Entity in 84ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started POST "/dashboard/users" for ::1 at 2015-12-06 04:40:16 +0100
Processing by Dashboard::V1::UsersController#create as JSON
  Parameters: {"email"=>"tola@devcenter.co", "password"=>"[FILTERED]", "first_name"=>"Tola", "last_name"=>"Badman", "organisation_id"=>"13"}
Unpermitted parameter: format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."email" = 'tola@devcenter.co' AND "users"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "organisation_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["first_name", "Tola"], ["last_name", "Badman"], ["email", "tola@devcenter.co"], ["encrypted_password", "$2a$10$.cFf8LMhXj/lMqTWQ.59rexR.U10ZSBN3JYMmpDxtFhE2saZQZpVy"], ["organisation_id", 13], ["created_at", "2015-12-06 03:40:16.801724"], ["updated_at", "2015-12-06 03:40:16.801724"]]
  [1m[36m (3.7ms)[0m  [1mcommit transaction[0m
Completed 201 Created in 93ms (Views: 1.1ms | ActiveRecord: 5.1ms)


Started GET "/dashboard/organisations" for ::1 at 2015-12-06 04:49:48 +0100
Processing by Dashboard::V1::OrganisationsController#index as JSON
  [1m[35mOrganisation Load (0.6ms)[0m  SELECT "organisations".* FROM "organisations"
Completed 200 OK in 16ms (Views: 7.3ms | ActiveRecord: 1.4ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddAuthenticationTokenToUsers (20151206035714)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "auth_token" varchar[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206035714"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to AddAuthenticationTokenToUsers (20151206035714)
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.7ms)[0m  CREATE TEMPORARY TABLE "ausers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "first_name" varchar, "last_name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "organisation_id" integer, "deleted_at" datetime, "auth_token" varchar) 
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "tindex_ausers_on_organisation_id" ON "ausers" ("organisation_id")
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "tindex_ausers_on_deleted_at" ON "ausers" ("deleted_at")[0m
  [1m[35m (0.3ms)[0m  CREATE UNIQUE INDEX "tindex_ausers_on_reset_password_token" ON "ausers" ("reset_password_token")
  [1m[36m (0.2ms)[0m  [1mCREATE UNIQUE INDEX "tindex_ausers_on_email" ON "ausers" ("email")[0m
  [1m[35m (0.6ms)[0m  SELECT * FROM "users"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "ausers" ("id","email","encrypted_password","reset_password_token","reset_password_sent_at","remember_created_at","sign_in_count","current_sign_in_at","last_sign_in_at","current_sign_in_ip","last_sign_in_ip","first_name","last_name","created_at","updated_at","organisation_id","deleted_at","auth_token") VALUES (1, 'trypio00@gmail.com', '$2a$10$UQOEj01YAtI.k4XPsmtS1.5iv85/p32iqHx2hgHXgTT30QIc31Hw.', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'Timi', 'Ajiboye', '2015-12-05 11:12:45.244501', '2015-12-05 11:12:45.244501', 1, NULL, NULL)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "ausers" ("id","email","encrypted_password","reset_password_token","reset_password_sent_at","remember_created_at","sign_in_count","current_sign_in_at","last_sign_in_at","current_sign_in_ip","last_sign_in_ip","first_name","last_name","created_at","updated_at","organisation_id","deleted_at","auth_token") VALUES (10, 'timi@ordertolagos.com', '$2a$10$jIkw/b/arBwKTbchixQ4vO03cC5DTQhQMog1WkJs2W1Ffz4sYlytK', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'timi', 'badman', '2015-12-06 03:17:32.832295', '2015-12-06 03:17:32.832295', 20, NULL, NULL)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "ausers" ("id","email","encrypted_password","reset_password_token","reset_password_sent_at","remember_created_at","sign_in_count","current_sign_in_at","last_sign_in_at","current_sign_in_ip","last_sign_in_ip","first_name","last_name","created_at","updated_at","organisation_id","deleted_at","auth_token") VALUES (13, 'timi@devcenter.co', '$2a$10$8hZSRz.X8/zbJwyTj6mcNO7KeMgsmjYtVARYCJhpj3ofvTaUkZ0U2', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'timi', 'badman', '2015-12-06 03:25:58.280916', '2015-12-06 03:25:58.280916', 22, NULL, NULL)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "ausers" ("id","email","encrypted_password","reset_password_token","reset_password_sent_at","remember_created_at","sign_in_count","current_sign_in_at","last_sign_in_at","current_sign_in_ip","last_sign_in_ip","first_name","last_name","created_at","updated_at","organisation_id","deleted_at","auth_token") VALUES (15, 'tola@devcenter.co', '$2a$10$.cFf8LMhXj/lMqTWQ.59rexR.U10ZSBN3JYMmpDxtFhE2saZQZpVy', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'Tola', 'Badman', '2015-12-06 03:40:16.801724', '2015-12-06 03:40:16.801724', 13, NULL, NULL)
  [1m[36m (1.6ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "first_name" varchar, "last_name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "organisation_id" integer, "deleted_at" datetime) 
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='tindex_ausers_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_ausers_on_email' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='tindex_ausers_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_ausers_on_reset_password_token' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='tindex_ausers_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_ausers_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='tindex_ausers_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_ausers_on_organisation_id' AND type='index'

  [1m[36m (0.6ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.3ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.2ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_users_on_deleted_at" ON "users" ("deleted_at")
  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_users_on_organisation_id" ON "users" ("organisation_id")
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "ausers"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("id","email","encrypted_password","reset_password_token","reset_password_sent_at","remember_created_at","sign_in_count","current_sign_in_at","last_sign_in_at","current_sign_in_ip","last_sign_in_ip","first_name","last_name","created_at","updated_at","organisation_id","deleted_at") VALUES (1, 'trypio00@gmail.com', '$2a$10$UQOEj01YAtI.k4XPsmtS1.5iv85/p32iqHx2hgHXgTT30QIc31Hw.', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'Timi', 'Ajiboye', '2015-12-05 11:12:45.244501', '2015-12-05 11:12:45.244501', 1, NULL)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("id","email","encrypted_password","reset_password_token","reset_password_sent_at","remember_created_at","sign_in_count","current_sign_in_at","last_sign_in_at","current_sign_in_ip","last_sign_in_ip","first_name","last_name","created_at","updated_at","organisation_id","deleted_at") VALUES (10, 'timi@ordertolagos.com', '$2a$10$jIkw/b/arBwKTbchixQ4vO03cC5DTQhQMog1WkJs2W1Ffz4sYlytK', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'timi', 'badman', '2015-12-06 03:17:32.832295', '2015-12-06 03:17:32.832295', 20, NULL)[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "users" ("id","email","encrypted_password","reset_password_token","reset_password_sent_at","remember_created_at","sign_in_count","current_sign_in_at","last_sign_in_at","current_sign_in_ip","last_sign_in_ip","first_name","last_name","created_at","updated_at","organisation_id","deleted_at") VALUES (13, 'timi@devcenter.co', '$2a$10$8hZSRz.X8/zbJwyTj6mcNO7KeMgsmjYtVARYCJhpj3ofvTaUkZ0U2', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'timi', 'badman', '2015-12-06 03:25:58.280916', '2015-12-06 03:25:58.280916', 22, NULL)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "users" ("id","email","encrypted_password","reset_password_token","reset_password_sent_at","remember_created_at","sign_in_count","current_sign_in_at","last_sign_in_at","current_sign_in_ip","last_sign_in_ip","first_name","last_name","created_at","updated_at","organisation_id","deleted_at") VALUES (15, 'tola@devcenter.co', '$2a$10$.cFf8LMhXj/lMqTWQ.59rexR.U10ZSBN3JYMmpDxtFhE2saZQZpVy', NULL, NULL, NULL, 0, NULL, NULL, NULL, NULL, 'Tola', 'Badman', '2015-12-06 03:40:16.801724', '2015-12-06 03:40:16.801724', 13, NULL)[0m
  [1m[35m (0.3ms)[0m  DROP TABLE "ausers"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20151206035714"]]
  [1m[35m (4.3ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddAuthenticationTokenToUsers (20151206035714)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "users" ADD "auth_token" varchar DEFAULT ''[0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_auth_token" ON "users" ("auth_token")[0m
SQLite3::ConstraintException: UNIQUE constraint failed: users.auth_token: CREATE UNIQUE INDEX "index_users_on_auth_token" ON "users" ("auth_token")
  [1m[35m (1.6ms)[0m  rollback transaction


Started GET "/dashboard/organisations" for ::1 at 2015-12-06 08:12:42 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

	bin/rake db:migrate RAILS_ENV=development

):
  activerecord (4.2.4) lib/active_record/migration.rb:392:in `check_pending!'
  activerecord (4.2.4) lib/active_record/migration.rb:373:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (56.9ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddAuthenticationTokenToUsers (20151206035714)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.0ms)[0m  [1mALTER TABLE "users" ADD "auth_token" varchar DEFAULT ''[0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.5ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_auth_token" ON "users" ("auth_token")[0m
SQLite3::ConstraintException: UNIQUE constraint failed: users.auth_token: CREATE UNIQUE INDEX "index_users_on_auth_token" ON "users" ("auth_token")
  [1m[35m (1.5ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddAuthenticationTokenToUsers (20151206035714)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "auth_token" varchar DEFAULT ''[0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.5ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_auth_token" ON "users" ("auth_token")[0m
SQLite3::ConstraintException: UNIQUE constraint failed: users.auth_token: CREATE UNIQUE INDEX "index_users_on_auth_token" ON "users" ("auth_token")
  [1m[35m (1.6ms)[0m  rollback transaction
  [1m[36m (1.9ms)[0m  [1mCREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user_id" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.6ms)[0m  [1mCREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (1.6ms)[0m  [1mCREATE  INDEX "index_organisations_on_primary_user_id" ON "organisations" ("primary_user_id")[0m
  [1m[35m (1.9ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "first_name" varchar, "last_name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "organisation_id" integer, "deleted_at" datetime) 
  [1m[36m (1.8ms)[0m  [1mCREATE  INDEX "index_users_on_deleted_at" ON "users" ("deleted_at")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (1.1ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.3ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m
  [1m[35m (2.1ms)[0m  CREATE  INDEX "index_users_on_organisation_id" ON "users" ("organisation_id")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m
  [1m[35m (2.1ms)[0m  CREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")
  [1m[36m (2.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (2.0ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206030931')
  [1m[36m (2.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151204154935')[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151204163514')
  [1m[36m (1.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151205114111')[0m
  [1m[35m (2.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151205133938')
  [1m[36m (1.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206030525')[0m
  [1m[35m (2.0ms)[0m  CREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user_id" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (1.9ms)[0m  CREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (1.6ms)[0m  CREATE  INDEX "index_organisations_on_primary_user_id" ON "organisations" ("primary_user_id")
  [1m[36m (1.7ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "first_name" varchar, "last_name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "organisation_id" integer, "deleted_at" datetime) [0m
  [1m[35m (2.5ms)[0m  CREATE  INDEX "index_users_on_deleted_at" ON "users" ("deleted_at")
  [1m[36m (0.4ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m
  [1m[35m (1.9ms)[0m  CREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (1.9ms)[0m  [1mCREATE  INDEX "index_users_on_organisation_id" ON "users" ("organisation_id")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'

  [1m[36m (0.4ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (2.2ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (3.2ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar NOT NULL) 
  [1m[36m (1.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (2.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206030931')[0m
  [1m[35m (2.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151204154935')
  [1m[36m (2.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151204163514')[0m
  [1m[35m (1.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151205114111')
  [1m[36m (1.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151205133938')[0m
  [1m[35m (1.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206030525')
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddAuthenticationTokenToUsers (20151206035714)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "auth_token" varchar DEFAULT ''[0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.3ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_auth_token" ON "users" ("auth_token")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206035714"]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
[0m
  [1m[35m (0.3ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_auth_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_auth_token' AND type='index'
[0m
  [1m[35m (1.7ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to AddAuthenticationTokenToUsers (20151206035714)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_auth_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_auth_token' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.3ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.4ms)[0m  [1mDROP INDEX "index_users_on_auth_token"[0m
  [1m[35m (0.5ms)[0m  CREATE TEMPORARY TABLE "ausers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "first_name" varchar, "last_name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "organisation_id" integer, "deleted_at" datetime, "auth_token" varchar DEFAULT '') 
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.9ms)[0m  CREATE UNIQUE INDEX "tindex_ausers_on_reset_password_token" ON "ausers" ("reset_password_token")
  [1m[36m (0.5ms)[0m  [1mCREATE  INDEX "tindex_ausers_on_organisation_id" ON "ausers" ("organisation_id")[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "tindex_ausers_on_email" ON "ausers" ("email")
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "tindex_ausers_on_deleted_at" ON "ausers" ("deleted_at")[0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "users"
  [1m[36m (0.4ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "first_name" varchar, "last_name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "organisation_id" integer, "deleted_at" datetime) 
  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='tindex_ausers_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_ausers_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='tindex_ausers_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_ausers_on_email' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='tindex_ausers_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_ausers_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='tindex_ausers_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_ausers_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_users_on_deleted_at" ON "users" ("deleted_at")[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_users_on_organisation_id" ON "users" ("organisation_id")
  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "ausers"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "ausers"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20151206035714"]]
  [1m[35m (3.6ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddAuthenticationTokenToUsers (20151206035714)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "auth_token" varchar DEFAULT ''[0m
  [1m[35m (0.0ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.3ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_auth_token" ON "users" ("auth_token")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206035714"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_auth_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_auth_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m


Started GET "/dashboard/organisations" for ::1 at 2015-12-06 08:16:29 +0100
  [1m[35mActiveRecord::SchemaMigration Load (0.9ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Processing by Dashboard::V1::OrganisationsController#index as JSON
  [1m[36mOrganisation Load (0.1ms)[0m  [1mSELECT "organisations".* FROM "organisations"[0m
Completed 200 OK in 8ms (Views: 1.3ms | ActiveRecord: 0.2ms)


Started GET "/dashboard/organisations" for ::1 at 2015-12-06 11:01:22 +0100
  [1m[36mActiveRecord::SchemaMigration Load (1.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Dashboard::V1::OrganisationsController#index as JSON
  [1m[35mOrganisation Load (1.4ms)[0m  SELECT "organisations".* FROM "organisations"
Completed 200 OK in 64ms (Views: 3.1ms | ActiveRecord: 1.6ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 11:01:46 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT  1 AS one FROM "users" WHERE ("users"."auth_token" = '' AND "users"."deleted_at" IS NULL) LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."email" = 'timi@ordertolagos.com' AND "users"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mOrganisation Exists (0.1ms)[0m  SELECT  1 AS one FROM "organisations" WHERE "organisations"."organisation_name" = 'OrderToLagos' LIMIT 1
  [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-06 10:01:46.204133"], ["updated_at", "2015-12-06 10:01:46.204133"]]
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."auth_token" = ? LIMIT 1  [["auth_token", "aag2r68fxmYQojsdKtDd"]]
  [1m[36mSQL (5.1ms)[0m  [1mINSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "organisation_id", "created_at", "updated_at", "auth_token") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$nmZ5hZVdCO5b7eGW6ios3OiXbFcjCThYu9x//svx9nSXs5C3ss4oi"], ["organisation_id", 1], ["created_at", "2015-12-06 10:01:46.207577"], ["updated_at", "2015-12-06 10:01:46.207577"], ["auth_token", "aag2r68fxmYQojsdKtDd"]]
  [1m[35m (3.3ms)[0m  commit transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35mOrganisation Exists (0.7ms)[0m  SELECT  1 AS one FROM "organisations" WHERE ("organisations"."organisation_name" = 'OrderToLagos' AND "organisations"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM "organisations" WHERE ("organisations"."organisation_name" = 'OrderToLagos' AND "organisations"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "organisations" SET "primary_user_id" = ?, "updated_at" = ? WHERE "organisations"."id" = ?  [["primary_user_id", 1], ["updated_at", "2015-12-06 10:01:46.227883"], ["id", 1]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
Completed 201 Created in 221ms (Views: 3.5ms | ActiveRecord: 17.5ms)


Started GET "/dashboard/organisations" for ::1 at 2015-12-06 12:11:22 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Dashboard::V1::OrganisationsController#index as JSON
  [1m[35mOrganisation Load (0.3ms)[0m  SELECT "organisations".* FROM "organisations"
Completed 200 OK in 49ms (Views: 14.2ms | ActiveRecord: 0.6ms)


Started GET "/dashboard/organisations" for ::1 at 2015-12-06 12:16:19 +0100
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Dashboard::V1::OrganisationsController#index as JSON
  [1m[35mOrganisation Load (1.3ms)[0m  SELECT "organisations".* FROM "organisations"
Completed 200 OK in 105ms (Views: 19.6ms | ActiveRecord: 3.0ms)
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddIsPrimaryToUserAndRemovePrimaryUserIdFromOrganisation (20151206112033)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "is_primary" boolean DEFAULT 'f'[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddIsPrimaryToUserAndRemovePrimaryUserIdFromOrganisation (20151206112033)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "is_primary" boolean DEFAULT 'f'[0m
  [1m[35m (0.4ms)[0m  CREATE TEMPORARY TABLE "aorganisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user_id" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.0ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "tindex_aorganisations_on_primary_user_id" ON "aorganisations" ("primary_user_id")
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "tindex_aorganisations_on_deleted_at" ON "aorganisations" ("deleted_at")[0m
  [1m[35m (1.1ms)[0m  SELECT * FROM "organisations"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "aorganisations" ("id","organisation_name","primary_user_id","email","client_key","phone","created_at","updated_at","deleted_at") VALUES (1, 'OrderToLagos', 1, 'timi@ordertolagos.com', NULL, '08028618180', '2015-12-06 10:01:46.204133', '2015-12-06 10:01:46.227883', NULL)[0m
  [1m[35m (3.6ms)[0m  DROP TABLE "organisations"
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) [0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='tindex_aorganisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_aorganisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='tindex_aorganisations_on_primary_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_aorganisations_on_primary_user_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  CREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "aorganisations"[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "organisations" ("id","organisation_name","email","client_key","phone","created_at","updated_at","deleted_at") VALUES (1, 'OrderToLagos', 'timi@ordertolagos.com', NULL, '08028618180', '2015-12-06 10:01:46.204133', '2015-12-06 10:01:46.227883', NULL)
  [1m[36m (0.6ms)[0m  [1mDROP TABLE "aorganisations"[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206112033"]]
  [1m[36m (4.3ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_auth_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_auth_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'



Started POST "/dashboard/organisations" for ::1 at 2015-12-06 13:34:13 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."auth_token" = '' AND "users"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE ("users"."email" = 'timi@ordertolagos.com' AND "users"."deleted_at" IS NULL) LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."auth_token" = ? LIMIT 1[0m  [["auth_token", "PddzfSgjeniTMWeDym1v"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "is_primary", "created_at", "updated_at", "auth_token") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$B2JDGhtwyKsJIelSkve12uxOQWXJnu9bDPPq0/XrXRcum8Yrwnq/C"], ["is_primary", "t"], ["created_at", "2015-12-06 12:34:13.927502"], ["updated_at", "2015-12-06 12:34:13.927502"], ["auth_token", "PddzfSgjeniTMWeDym1v"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrganisation Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "organisations" WHERE "organisations"."organisation_name" = 'OrderToLagos' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-06 12:34:13.939255"], ["updated_at", "2015-12-06 12:34:13.939255"]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."auth_token" = 'PddzfSgjeniTMWeDym1v' AND "users"."deleted_at" IS NULL AND "users"."id" != 2) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "users" SET "organisation_id" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["organisation_id", 2], ["updated_at", "2015-12-06 12:34:13.943929"], ["id", 2]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 270ms (ActiveRecord: 7.1ms)

ActiveRecord::UnknownAttributeError (unknown attribute 'primary_user_id' for Organisation.):
  app/controllers/dashboard/v1/organisations_controller.rb:18:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (9.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (75.0ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 13:34:57 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."auth_token" = '' AND "users"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE ("users"."email" = 'timi@ordertolagos.com' AND "users"."deleted_at" IS NULL) LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."auth_token" = ? LIMIT 1[0m  [["auth_token", "ZNEGtvUut6EtrMUnA8jX"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "is_primary", "created_at", "updated_at", "auth_token") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$YEhSkVZetPErVXW0gE1gbeNXGTO9DK2BYSz9XO7Y.CSRbhOHtTLha"], ["is_primary", "t"], ["created_at", "2015-12-06 12:34:57.844883"], ["updated_at", "2015-12-06 12:34:57.844883"], ["auth_token", "ZNEGtvUut6EtrMUnA8jX"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrganisation Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "organisations" WHERE "organisations"."organisation_name" = 'OrderToLagos' LIMIT 1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-06 12:34:57.855535"], ["updated_at", "2015-12-06 12:34:57.855535"]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."auth_token" = 'ZNEGtvUut6EtrMUnA8jX' AND "users"."deleted_at" IS NULL AND "users"."id" != 3) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "organisation_id" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["organisation_id", 3], ["updated_at", "2015-12-06 12:34:57.860819"], ["id", 3]]
  [1m[36m (3.6ms)[0m  [1mcommit transaction[0m
Completed 201 Created in 169ms (Views: 26.8ms | ActiveRecord: 9.7ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 13:40:21 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."auth_token" = '' AND "users"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE ("users"."email" = 'timi@ordertolagos.com' AND "users"."deleted_at" IS NULL) LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."auth_token" = ? LIMIT 1[0m  [["auth_token", "_bQjAeiQiWC7UjHnrjcM"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "is_primary", "created_at", "updated_at", "auth_token") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$2N6gJahmWlxtuB6RHbLW7uak4oZT967z8ktlha38hyd1HEn.Hhjke"], ["is_primary", "t"], ["created_at", "2015-12-06 12:40:21.285157"], ["updated_at", "2015-12-06 12:40:21.285157"], ["auth_token", "_bQjAeiQiWC7UjHnrjcM"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mOrganisation Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "organisations" WHERE "organisations"."organisation_name" = 'OrderToLagos' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-06 12:40:21.294592"], ["updated_at", "2015-12-06 12:40:21.294592"]]
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."auth_token" = '_bQjAeiQiWC7UjHnrjcM' AND "users"."deleted_at" IS NULL AND "users"."id" != 4) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  UPDATE "users" SET "organisation_id" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["organisation_id", 4], ["updated_at", "2015-12-06 12:40:21.297290"], ["id", 4]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
Completed 201 Created in 124ms (Views: 5.6ms | ActiveRecord: 6.5ms)


Started POST "/dashboard/organisation/4" for ::1 at 2015-12-06 14:41:02 +0100

ActionController::RoutingError (No route matches [POST] "/dashboard/organisation/4"):
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_table.html.erb (13.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (94.0ms)


Started GET "/dashboard/organisation/4" for ::1 at 2015-12-06 14:41:12 +0100

ActionController::RoutingError (No route matches [GET] "/dashboard/organisation/4"):
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (74.8ms)


Started GET "/dashboard/organisations/4" for ::1 at 2015-12-06 14:41:17 +0100
Processing by Dashboard::V1::OrganisationsController#show as JSON
  Parameters: {"id"=>"4"}
  [1m[35mOrganisation Load (0.3ms)[0m  SELECT  "organisations".* FROM "organisations" WHERE "organisations"."id" = ? LIMIT 1  [["id", 4]]
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."organisation_id" = ? AND "users"."is_primary" = ? LIMIT 1[0m  [["organisation_id", 4], ["is_primary", "t"]]
Completed 200 OK in 15ms (Views: 5.4ms | ActiveRecord: 1.5ms)
  [1m[36m (2.1ms)[0m  [1mCREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.7ms)[0m  [1mCREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")[0m
  [1m[35m (2.2ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "first_name" varchar, "last_name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "organisation_id" integer, "deleted_at" datetime, "auth_token" varchar DEFAULT '', "is_primary" boolean DEFAULT 'f') 
  [1m[36m (3.8ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_auth_token" ON "users" ("auth_token")[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_auth_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_auth_token' AND type='index'

  [1m[36m (2.0ms)[0m  [1mCREATE  INDEX "index_users_on_deleted_at" ON "users" ("deleted_at")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_auth_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_auth_token' AND type='index'
[0m
  [1m[35m (2.0ms)[0m  CREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.4ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_auth_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_auth_token' AND type='index'
[0m
  [1m[35m (2.0ms)[0m  CREATE  INDEX "index_users_on_organisation_id" ON "users" ("organisation_id")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.3ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_auth_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_auth_token' AND type='index'

  [1m[36m (3.6ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (1.7ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar NOT NULL) 
  [1m[36m (2.0ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (2.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206112033')[0m
  [1m[35m (2.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151204154935')
  [1m[36m (1.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151204163514')[0m
  [1m[35m (2.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151205114111')
  [1m[36m (2.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151205133938')[0m
  [1m[35m (1.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206030525')
  [1m[36m (1.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206030931')[0m
  [1m[35m (1.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206035714')
  [1m[36m (2.6ms)[0m  [1mCREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) [0m
  [1m[35m (0.7ms)[0m  select sqlite_version(*)
  [1m[36m (2.5ms)[0m  [1mCREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")[0m
  [1m[35m (2.0ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "first_name" varchar, "last_name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "organisation_id" integer, "deleted_at" datetime, "auth_token" varchar DEFAULT '', "is_primary" boolean DEFAULT 'f') 
  [1m[36m (1.9ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_auth_token" ON "users" ("auth_token")[0m
  [1m[35m (0.5ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_auth_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_auth_token' AND type='index'

  [1m[36m (1.8ms)[0m  [1mCREATE  INDEX "index_users_on_deleted_at" ON "users" ("deleted_at")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_auth_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_auth_token' AND type='index'
[0m
  [1m[35m (2.3ms)[0m  CREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_auth_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_auth_token' AND type='index'
[0m
  [1m[35m (1.7ms)[0m  CREATE  INDEX "index_users_on_organisation_id" ON "users" ("organisation_id")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.4ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_auth_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_auth_token' AND type='index'

  [1m[36m (2.3ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (2.1ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar NOT NULL) 
  [1m[36m (1.3ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (1.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206112033')[0m
  [1m[35m (2.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151204154935')
  [1m[36m (1.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151204163514')[0m
  [1m[35m (3.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151205114111')
  [1m[36m (1.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151205133938')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206030525')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206030931')[0m
  [1m[35m (1.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206035714')
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeleteUsers (20151206135859)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (3.3ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206135859"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to DeleteUsers (20151206135859)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddConfirmableToDevise (20151206134750)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151206134750"]]
  [1m[35m (1.5ms)[0m  commit transaction
Migrating to DeviseTokenAuthCreateUsers (20151206140817)
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
DEPRECATION WARNING: `#timestamps` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /Users/timi/gigster-locent-api/db/migrate/20151206140817_devise_token_auth_create_users.rb:44)
  [1m[35m (1.4ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar DEFAULT 'email' NOT NULL, "uid" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "confirmation_token" varchar, "confirmed_at" datetime, "confirmation_sent_at" datetime, "unconfirmed_email" varchar, "first_name" varchar, "last_name" varchar, "email" varchar, "tokens" text, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_users_on_email" ON "users" ("email")
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.6ms)[0m  CREATE UNIQUE INDEX "index_users_on_uid_and_provider" ON "users" ("uid", "provider")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.3ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206140817"]]
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'



Started POST "/dashboard/auth" for ::1 at 2015-12-06 17:02:50 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActionController::RoutingError (No route matches [POST] "/dashboard/auth"):
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_route.html.erb (1.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_table.html.erb (11.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (4.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (92.1ms)


Started POST "/dashboard/auth" for ::1 at 2015-12-06 17:03:08 +0100

ActionController::RoutingError (uninitialized constant ApplicationController::Authenitcable):
  app/controllers/application_controller.rb:3:in `<class:ApplicationController>'
  app/controllers/application_controller.rb:1:in `<top (required)>'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (107.6ms)


Started POST "/dashboard/auth" for ::1 at 2015-12-06 17:03:18 +0100
Processing by DeviseTokenAuth::RegistrationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "password_confirmation"=>"[FILTERED]"}
Unpermitted parameters: first_name, last_name, format
Unpermitted parameters: first_name, last_name, format
Unpermitted parameters: first_name, last_name, format
Completed 403 Forbidden in 123ms (Views: 0.4ms | ActiveRecord: 0.2ms)


Started POST "/dashboard/auth" for ::1 at 2015-12-06 17:18:23 +0100

SyntaxError (/Users/timi/gigster-locent-api/app/controllers/application_controller.rb:8: syntax error, unexpected ',', expecting keyword_end
...r.for(:sign_up) << :first_name, :last_name
...                               ^):
  app/controllers/application_controller.rb:8: syntax error, unexpected ',', expecting keyword_end


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (59.9ms)


Started POST "/dashboard/auth" for ::1 at 2015-12-06 17:18:39 +0100
Processing by DeviseTokenAuth::RegistrationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "password_confirmation"=>"[FILTERED]"}
Unpermitted parameter: format
Unpermitted parameter: format
Unpermitted parameter: format
Completed 403 Forbidden in 108ms (Views: 0.4ms | ActiveRecord: 0.2ms)


Started POST "/dashboard/auth" for ::1 at 2015-12-06 17:26:52 +0100
Processing by DeviseTokenAuth::RegistrationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "password_confirmation"=>"[FILTERED]", "confirm_success_url"=>"http://helloworld.ng"}
Unpermitted parameters: confirm_success_url, format
Unpermitted parameters: confirm_success_url, format
Unpermitted parameters: confirm_success_url, format
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = ? AND "users"."email" = ?[0m  [["provider", "email"], ["email", "timi@ordertolagos.com"]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."confirmation_token" = ?  ORDER BY "users"."id" ASC LIMIT 1  [["confirmation_token", "9a24645a85bea7013483105aa5e16e81591623882558ab05baa5028b7032b844"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "tokens", "uid", "created_at", "updated_at", "confirmation_token", "confirmation_sent_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$hDUO1Dked5eU1GvQkfcGYejn82JbQGyzC.ZGvh7glo7DM1ID6Q3qC"], ["first_name", "timi"], ["last_name", "badman"], ["tokens", "{}"], ["uid", "timi@ordertolagos.com"], ["created_at", "2015-12-06 16:26:52.381119"], ["updated_at", "2015-12-06 16:26:52.381119"], ["confirmation_token", "wsbvjECHhyPeLsY42c4y"], ["confirmation_sent_at", "2015-12-06 16:26:52.607132"]]
  [1m[35m (1.8ms)[0m  commit transaction
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/devise_token_auth-0.1.36/app/views/devise/mailer/confirmation_instructions.html.erb (195.0ms)

Devise::Mailer#confirmation_instructions: processed outbound mail in 221.0ms
Completed 500 Internal Server Error in 608ms (ActiveRecord: 3.2ms)

ActionView::Template::Error (undefined method `user_confirmation_url' for #<ActionDispatch::Routing::RoutesProxy:0x007f9929e2c600>):
    2: 
    3: <p>You can confirm your account email through the link below:</p>
    4: 
    5: <p><%= link_to 'Confirm my account', confirmation_url(@resource, {confirmation_token: @token, config: message['client-config'].to_s, redirect_url: message['redirect-url']}).html_safe %></p>
  actionpack (4.2.4) lib/action_dispatch/routing/routes_proxy.rb:36:in `method_missing'
  devise (3.5.2) lib/devise/controllers/url_helpers.rb:51:in `block (4 levels) in generate_helpers!'
  devise_token_auth (0.1.36) app/views/devise/mailer/confirmation_instructions.html.erb:5:in `___sers_timi__rbenv_versions_______lib_ruby_gems_______gems_devise_token_auth________app_views_devise_mailer_confirmation_instructions_html_erb__2768693436604136750_70147904764620'
  actionview (4.2.4) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.2.4) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.4) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.4) lib/action_view/template.rb:143:in `render'
  actionview (4.2.4) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (4.2.4) lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.4) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `instrument'
  actionview (4.2.4) lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'
  actionview (4.2.4) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (4.2.4) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (4.2.4) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (4.2.4) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (4.2.4) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.4) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.4) lib/action_view/rendering.rb:100:in `_render_template'
  actionview (4.2.4) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.4) lib/abstract_controller/rendering.rb:25:in `render'
  actionmailer (4.2.4) lib/action_mailer/base.rb:904:in `block in collect_responses'
  actionmailer (4.2.4) lib/action_mailer/base.rb:918:in `each'
  actionmailer (4.2.4) lib/action_mailer/base.rb:918:in `each_template'
  actionmailer (4.2.4) lib/action_mailer/base.rb:900:in `collect_responses'
  actionmailer (4.2.4) lib/action_mailer/base.rb:829:in `mail'
  devise (3.5.2) lib/devise/mailers/helpers.rb:16:in `devise_mail'
  devise (3.5.2) app/mailers/devise/mailer.rb:7:in `confirmation_instructions'
  actionpack (4.2.4) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.4) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.4) lib/action_view/rendering.rb:30:in `process'
  actionmailer (4.2.4) lib/action_mailer/base.rb:596:in `block in process'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.4) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `instrument'
  actionmailer (4.2.4) lib/action_mailer/base.rb:593:in `process'
  actionmailer (4.2.4) lib/action_mailer/base.rb:584:in `initialize'
  actionmailer (4.2.4) lib/action_mailer/message_delivery.rb:25:in `new'
  actionmailer (4.2.4) lib/action_mailer/message_delivery.rb:25:in `__getobj__'
  actionmailer (4.2.4) lib/action_mailer/message_delivery.rb:34:in `message'
  actionmailer (4.2.4) lib/action_mailer/message_delivery.rb:85:in `deliver_now'
  devise (3.5.2) lib/devise/models/authenticatable.rb:170:in `send_devise_notification'
  devise_token_auth (0.1.36) app/models/devise_token_auth/concerns/user.rb:71:in `send_confirmation_instructions'
  devise_token_auth (0.1.36) app/controllers/devise_token_auth/registrations_controller.rb:45:in `create'
  actionpack (4.2.4) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.4) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.4) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.4) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.4) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.4) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  activerecord (4.2.4) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.4) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.4) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.4) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.4) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:76:in `call'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:76:in `dispatch'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:45:in `serve'
  actionpack (4.2.4) lib/action_dispatch/routing/mapper.rb:49:in `serve'
  actionpack (4.2.4) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.4) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.4) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:821:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  activerecord (4.2.4) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.4) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.4ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (66.0ms)


Started POST "/dashboard/auth" for ::1 at 2015-12-06 17:35:13 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by DeviseTokenAuth::RegistrationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "password_confirmation"=>"[FILTERED]", "confirm_success_url"=>"http://helloworld.ng"}
Unpermitted parameters: confirm_success_url, format
Unpermitted parameters: confirm_success_url, format
Unpermitted parameters: confirm_success_url, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (2.1ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = ? AND "users"."email" = ?[0m  [["provider", "email"], ["email", "timi@ordertolagos.com"]]
  [1m[35mUser Load (1.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."confirmation_token" = ?  ORDER BY "users"."id" ASC LIMIT 1  [["confirmation_token", "a95a6f084e6633a31add012b050b7cb63976edcfac9096537527a8989f3c0d65"]]
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "tokens", "uid", "created_at", "updated_at", "confirmation_token", "confirmation_sent_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$3klR7GvP.ietwGLnNVupYeDwiZJTtq8rsIvg4GMe.a3u3nIVi3/AC"], ["first_name", "timi"], ["last_name", "badman"], ["tokens", "{}"], ["uid", "timi@ordertolagos.com"], ["created_at", "2015-12-06 16:35:13.359605"], ["updated_at", "2015-12-06 16:35:13.359605"], ["confirmation_token", "H5ZXcXGzwhUJEMmxkzyi"], ["confirmation_sent_at", "2015-12-06 16:35:13.588088"]]
  [1m[35m (1.5ms)[0m  commit transaction
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/devise_token_auth-0.1.36/app/views/devise/mailer/confirmation_instructions.html.erb (10.4ms)

Devise::Mailer#confirmation_instructions: processed outbound mail in 44.6ms
Completed 500 Internal Server Error in 443ms (ActiveRecord: 7.8ms)

ActionView::Template::Error (Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true):
    2: 
    3: <p>You can confirm your account email through the link below:</p>
    4: 
    5: <p><%= link_to 'Confirm my account', confirmation_url(@resource, {confirmation_token: @token, config: message['client-config'].to_s, redirect_url: message['redirect-url']}).html_safe %></p>
  actionpack (4.2.4) lib/action_dispatch/http/url.rb:45:in `full_url_for'
  actionpack (4.2.4) lib/action_dispatch/http/url.rb:35:in `url_for'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:356:in `block in <class:RouteSet>'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:815:in `call'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:815:in `url_for'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:282:in `call'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:225:in `call'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:347:in `block (2 levels) in define_url_helper'
  actionpack (4.2.4) lib/action_dispatch/routing/routes_proxy.rb:31:in `dashboard_user_confirmation_url'
  actionpack (4.2.4) lib/action_dispatch/routing/routes_proxy.rb:34:in `method_missing'
  devise (3.5.2) lib/devise/controllers/url_helpers.rb:51:in `block (4 levels) in generate_helpers!'
  devise_token_auth (0.1.36) app/views/devise/mailer/confirmation_instructions.html.erb:5:in `___sers_timi__rbenv_versions_______lib_ruby_gems_______gems_devise_token_auth________app_views_devise_mailer_confirmation_instructions_html_erb__799640083616958976_70166789847140'
  actionview (4.2.4) lib/action_view/template.rb:145:in `block in render'
  activesupport (4.2.4) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.4) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.4) lib/action_view/template.rb:143:in `render'
  actionview (4.2.4) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (4.2.4) lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.4) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `instrument'
  actionview (4.2.4) lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'
  actionview (4.2.4) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (4.2.4) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (4.2.4) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (4.2.4) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (4.2.4) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.4) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.4) lib/action_view/rendering.rb:100:in `_render_template'
  actionview (4.2.4) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.4) lib/abstract_controller/rendering.rb:25:in `render'
  actionmailer (4.2.4) lib/action_mailer/base.rb:904:in `block in collect_responses'
  actionmailer (4.2.4) lib/action_mailer/base.rb:918:in `each'
  actionmailer (4.2.4) lib/action_mailer/base.rb:918:in `each_template'
  actionmailer (4.2.4) lib/action_mailer/base.rb:900:in `collect_responses'
  actionmailer (4.2.4) lib/action_mailer/base.rb:829:in `mail'
  devise (3.5.2) lib/devise/mailers/helpers.rb:16:in `devise_mail'
  devise (3.5.2) app/mailers/devise/mailer.rb:7:in `confirmation_instructions'
  actionpack (4.2.4) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.4) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.4) lib/action_view/rendering.rb:30:in `process'
  actionmailer (4.2.4) lib/action_mailer/base.rb:596:in `block in process'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.4) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `instrument'
  actionmailer (4.2.4) lib/action_mailer/base.rb:593:in `process'
  actionmailer (4.2.4) lib/action_mailer/base.rb:584:in `initialize'
  actionmailer (4.2.4) lib/action_mailer/message_delivery.rb:25:in `new'
  actionmailer (4.2.4) lib/action_mailer/message_delivery.rb:25:in `__getobj__'
  actionmailer (4.2.4) lib/action_mailer/message_delivery.rb:34:in `message'
  actionmailer (4.2.4) lib/action_mailer/message_delivery.rb:85:in `deliver_now'
  devise (3.5.2) lib/devise/models/authenticatable.rb:170:in `send_devise_notification'
  devise_token_auth (0.1.36) app/models/devise_token_auth/concerns/user.rb:71:in `send_confirmation_instructions'
  devise_token_auth (0.1.36) app/controllers/devise_token_auth/registrations_controller.rb:45:in `create'
  actionpack (4.2.4) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.4) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.4) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.4) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.4) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:92:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.4) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.4) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.4) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  activerecord (4.2.4) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.4) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.4) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.4) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.4) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.4) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:76:in `call'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:76:in `dispatch'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:45:in `serve'
  actionpack (4.2.4) lib/action_dispatch/routing/mapper.rb:49:in `serve'
  actionpack (4.2.4) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.4) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.4) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.4) lib/action_dispatch/routing/route_set.rb:821:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  rack (1.6.4) lib/rack/etag.rb:24:in `call'
  rack (1.6.4) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.4) lib/rack/head.rb:13:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  activerecord (4.2.4) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.4) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (56.1ms)


Started POST "/dashboard/auth" for ::1 at 2015-12-06 17:38:31 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by DeviseTokenAuth::RegistrationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "password_confirmation"=>"[FILTERED]", "confirm_success_url"=>"http://helloworld.ng"}
Unpermitted parameters: confirm_success_url, format
Unpermitted parameters: confirm_success_url, format
Unpermitted parameters: confirm_success_url, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = ? AND "users"."email" = ?[0m  [["provider", "email"], ["email", "timi@ordertolagos.com"]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."confirmation_token" = ?  ORDER BY "users"."id" ASC LIMIT 1  [["confirmation_token", "d77cabf9345a60681b2fe3c338a1a7985e9a238ff0b1a33f5d5036335bd09ac8"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "tokens", "uid", "created_at", "updated_at", "confirmation_token", "confirmation_sent_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$1xtFU3XTHHh5HbH.Wu3kvuNyIlbvaY1Af/fR98z2kGV7w4Ac4BF4W"], ["first_name", "timi"], ["last_name", "badman"], ["tokens", "{}"], ["uid", "timi@ordertolagos.com"], ["created_at", "2015-12-06 16:38:31.747039"], ["updated_at", "2015-12-06 16:38:31.747039"], ["confirmation_token", "tk7-KVdLB6FoWsiv66jW"], ["confirmation_sent_at", "2015-12-06 16:38:31.967659"]]
  [1m[35m (1.6ms)[0m  commit transaction
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/devise_token_auth-0.1.36/app/views/devise/mailer/confirmation_instructions.html.erb (5.4ms)

Devise::Mailer#confirmation_instructions: processed outbound mail in 215.9ms

Sent mail to timi@ordertolagos.com (17.5ms)
Date: Sun, 06 Dec 2015 17:38:32 +0100
From: please-change-me-at-config-initializers-devise@example.com
Reply-To: please-change-me-at-config-initializers-devise@example.com
To: timi@ordertolagos.com
Message-ID: <5664648832dd8_17a13fd8d5bbc4dc4867c@Timis-MacBook-Pro.local.mail>
Subject: Confirmation instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
client-config: default
redirect-url: http://helloworld.ng

<p>Welcome timi@ordertolagos.com!</p>

<p>You can confirm your account email through the link below:</p>

<p><a href="http://localhost:3000/dashboard/auth/confirmation?config=default&confirmation_token=tk7-KVdLB6FoWsiv66jW&redirect_url=http%3A%2F%2Fhelloworld.ng">Confirm my account</a></p>

Completed 200 OK in 610ms (Views: 0.6ms | ActiveRecord: 3.1ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddOrganisationIdToUser (20151206164658)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "users" ADD "organisation_id" integer[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "users" ADD "is_primary" boolean DEFAULT 'f'
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151206164658"]]
  [1m[35m (2.0ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.3ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 17:47:49 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.3ms)

NoMethodError (undefined method `build_primary_user' for #<Organisation:0x007fb1ab6da9e8>):
  app/controllers/dashboard/v1/organisations_controller.rb:37:in `create_primary_user_account'
  app/controllers/dashboard/v1/organisations_controller.rb:17:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (57.6ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 17:48:08 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, phone, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = ? AND "users"."email" = ?[0m  [["provider", "email"], ["email", "timi@ordertolagos.com"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."confirmation_token" = ?  ORDER BY "users"."id" ASC LIMIT 1  [["confirmation_token", "9c1d25cc1a7af67e2701cdac58f200771de15e65b3b5b44884bd11c766ea3a94"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "is_primary", "tokens", "uid", "created_at", "updated_at", "confirmation_token", "confirmation_sent_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$TupCDq4hKz0lmRXxaRf1k.htwt3XblKu24J1zsm9MGKUKfE9d89.e"], ["is_primary", "t"], ["tokens", "{}"], ["uid", "timi@ordertolagos.com"], ["created_at", "2015-12-06 16:48:08.775017"], ["updated_at", "2015-12-06 16:48:08.775017"], ["confirmation_token", "cUuQxWkGRgxUGxcdshsi"], ["confirmation_sent_at", "2015-12-06 16:48:08.778608"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrganisation Exists (0.1ms)[0m  SELECT  1 AS one FROM "organisations" WHERE "organisations"."organisation_name" = 'OrderToLagos' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["phone", "08028618180"], ["created_at", "2015-12-06 16:48:08.801931"], ["updated_at", "2015-12-06 16:48:08.801931"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "users" SET "organisation_id" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["organisation_id", 1], ["updated_at", "2015-12-06 16:48:08.803723"], ["id", 4]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
Completed 201 Created in 159ms (Views: 8.3ms | ActiveRecord: 6.1ms)


Started POST "/dashboard/auth" for ::1 at 2015-12-06 18:45:41 +0100
  [1m[36mActiveRecord::SchemaMigration Load (2.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by DeviseTokenAuth::RegistrationsController#create as JSON
  Parameters: {"email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "password_confirmation"=>"[FILTERED]"}
Unpermitted parameter: format
Unpermitted parameter: format
Unpermitted parameter: format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.4ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = ? AND "users"."email" = ?[0m  [["provider", "email"], ["email", "timi@ordertolagos.com"]]
  [1m[35mUser Load (1.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."confirmation_token" = ?  ORDER BY "users"."id" ASC LIMIT 1  [["confirmation_token", "d96d293b5312b373f8bb3fbc7e9b661c6c744b465dceff47d5343be6db91c90a"]]
  [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "tokens", "uid", "created_at", "updated_at", "confirmation_token", "confirmation_sent_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$naLrhxhJiTjRuUcLdpXNq.dkg08gCdYTa99CUz36gxdk3iFrbRufO"], ["first_name", "timi"], ["last_name", "badman"], ["tokens", "{}"], ["uid", "timi@ordertolagos.com"], ["created_at", "2015-12-06 17:45:42.084232"], ["updated_at", "2015-12-06 17:45:42.084232"], ["confirmation_token", "uDqdqy-fCGjXrUMqe5TN"], ["confirmation_sent_at", "2015-12-06 17:45:42.315459"]]
  [1m[35m (1.7ms)[0m  commit transaction
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/devise_token_auth-0.1.36/app/views/devise/mailer/confirmation_instructions.html.erb (5.0ms)

Devise::Mailer#confirmation_instructions: processed outbound mail in 235.6ms

Sent mail to timi@ordertolagos.com (17.3ms)
Date: Sun, 06 Dec 2015 18:45:42 +0100
From: test@locent.com
Reply-To: test@locent.com
To: timi@ordertolagos.com
Message-ID: <566474468d26b_1b3e3fd7318a3b2463976@Timis-MacBook-Pro.local.mail>
Subject: Confirmation instructions
Mime-Version: 1.0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
client-config: default
redirect-url: http://google.com

<p>Welcome timi@ordertolagos.com!</p>

<p>You can confirm your account email through the link below:</p>

<p><a href="http://localhost:3000/dashboard/auth/confirmation?config=default&confirmation_token=uDqdqy-fCGjXrUMqe5TN&redirect_url=http%3A%2F%2Fgoogle.com">Confirm my account</a></p>

Completed 200 OK in 694ms (Views: 1.0ms | ActiveRecord: 7.3ms)


Started GET "/dashboard/auth/confirmation?config=default&confirmation_token=uDqdqy-fCGjXrUMqe5TN&redirect_url=http%3A%2F%2Fgoogle.com" for ::1 at 2015-12-06 18:52:22 +0100
Processing by DeviseTokenAuth::ConfirmationsController#show as JSON
  Parameters: {"config"=>"default", "confirmation_token"=>"uDqdqy-fCGjXrUMqe5TN", "redirect_url"=>"http://google.com"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."confirmation_token" = ?  ORDER BY "users"."id" ASC LIMIT 1[0m  [["confirmation_token", "uDqdqy-fCGjXrUMqe5TN"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "users" SET "confirmed_at" = ?, "updated_at" = ? WHERE "users"."id" = ?[0m  [["confirmed_at", "2015-12-06 17:52:22.022281"], ["updated_at", "2015-12-06 17:52:22.023178"], ["id", 5]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "users" SET "tokens" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["tokens", "{\"yHfj3941gAclVdZNOzhxkQ\":{\"token\":\"$2a$10$eWznHlgjUI7HmvksT6d5AO9Dot0xyYxaVNzDJo9ZlHiz/RMF7WTiC\",\"expiry\":1449683542}}"], ["updated_at", "2015-12-06 17:52:22.104616"], ["id", 5]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
Redirected to http://google.com?account_confirmation_success=true&client_id=yHfj3941gAclVdZNOzhxkQ&config=default&expiry=&token=EO3BbckI5nsiy-uxSYrtjA&uid=timi%40ordertolagos.com
Completed 302 Found in 93ms (ActiveRecord: 4.5ms)


Started POST "/dashboard/organisations" for ::1 at 2015-12-06 18:55:14 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"email"=>"timi@devcenter.co", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman", "phone"=>"08028618180", "organisation_name"=>"Ordertolagos"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: phone, organisation_name, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."provider" = ? AND "users"."email" = ?[0m  [["provider", "email"], ["email", "timi@devcenter.co"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."confirmation_token" = ?  ORDER BY "users"."id" ASC LIMIT 1  [["confirmation_token", "e23109b90a976a03039b48df3d52627e75cc707336290b9f4936c0944e588052"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "is_primary", "tokens", "uid", "created_at", "updated_at", "confirmation_token", "confirmation_sent_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@devcenter.co"], ["encrypted_password", "$2a$10$dcO5oJpgUHbYHVS1iRGVG.4GEmYfV8LsjAquVo.fFD81FF5428kwK"], ["is_primary", "t"], ["tokens", "{}"], ["uid", "timi@devcenter.co"], ["created_at", "2015-12-06 17:55:14.680211"], ["updated_at", "2015-12-06 17:55:14.680211"], ["confirmation_token", "8Gw-rLXybX3r7pkazWuW"], ["confirmation_sent_at", "2015-12-06 17:55:14.682942"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrganisation Exists (0.3ms)[0m  SELECT  1 AS one FROM "organisations" WHERE "organisations"."organisation_name" = 'Ordertolagos' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "phone", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["organisation_name", "Ordertolagos"], ["email", "timi@devcenter.co"], ["phone", "08028618180"], ["created_at", "2015-12-06 17:55:14.714561"], ["updated_at", "2015-12-06 17:55:14.714561"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "users" SET "organisation_id" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["organisation_id", 2], ["updated_at", "2015-12-06 17:55:14.718469"], ["id", 6]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
Completed 201 Created in 204ms (Views: 11.5ms | ActiveRecord: 6.7ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateProducts (20151206182109)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (2.3ms)[0m  [1mCREATE TABLE "products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "has_items" boolean DEFAULT 'f', "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206182109"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "products" ("name", "has_items", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Keyword"], ["has_items", "t"], ["created_at", "2015-12-06 18:25:27.430096"], ["updated_at", "2015-12-06 18:25:27.430096"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Clearcart"], ["created_at", "2015-12-06 18:25:27.436091"], ["updated_at", "2015-12-06 18:25:27.436091"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Safetext"], ["created_at", "2015-12-06 18:25:27.438804"], ["updated_at", "2015-12-06 18:25:27.438804"]]
  [1m[35m (1.0ms)[0m  commit transaction


Started POST "/dashboard/product" for ::1 at 2015-12-06 19:54:16 +0100
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m

ActionController::RoutingError (No route matches [POST] "/dashboard/product"):
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_route.html.erb (2.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_table.html.erb (17.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (7.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (121.4ms)


Started GET "/dashboard/product" for ::1 at 2015-12-06 19:55:28 +0100

ActionController::RoutingError (No route matches [GET] "/dashboard/product"):
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_route.html.erb (3.4ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/routes/_table.html.erb (2.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (99.5ms)


Started GET "/dashboard/products" for ::1 at 2015-12-06 19:55:35 +0100
Processing by Dashboard::V1::ProductsController#index as JSON
  [1m[35mProduct Load (1.8ms)[0m  SELECT "products".* FROM "products"
Completed 200 OK in 33ms (Views: 17.3ms | ActiveRecord: 2.9ms)


Started GET "/dashboard/products" for ::1 at 2015-12-06 19:56:02 +0100
Processing by Dashboard::V1::ProductsController#index as JSON
  [1m[36mProduct Load (0.1ms)[0m  [1mSELECT "products".* FROM "products"[0m
Completed 200 OK in 13ms (Views: 8.0ms | ActiveRecord: 0.3ms)
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSubscriptions (20151206190416)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.5ms)[0m  [1mCREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_id" integer, "product_id" integer, "short_code" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206190416"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateSubscriptions (20151206190416)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.5ms)[0m  DROP TABLE "subscriptions"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20151206190416"]]
  [1m[35m (2.6ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSubscriptions (20151206190416)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mCREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_id" integer, "product_id" integer, "short_code" integer, "option_id" varchar, "option_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206190416"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateKeyWordOptions (20151207062911)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "key_word_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207062911"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.8ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateKeyWordOptions (20151207062911)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  DROP TABLE "key_word_options"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20151207062911"]]
  [1m[35m (1.9ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateKeyWordOptions (20151207062911)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "key_word_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207062911"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.3ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateKeyWordOptions (20151207062911)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  DROP TABLE "key_word_options"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20151207062911"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateKeyWordOptions (20151207063309)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "key_word_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207063309"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'



Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:25:08 +0100
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "subscriptions_ids"=>"[1,2,3]"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `each' for nil:NilClass):
  app/controllers/dashboard/v1/subscriptions_controller.rb:6:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.4ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (49.6ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:25:28 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"[1,2,3]"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `each' for "[1,2,3]":String):
  app/controllers/dashboard/v1/subscriptions_controller.rb:6:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (52.6ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:26:55 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>["[1,2,3]"]}
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.4ms)

NoMethodError (undefined method `import' for #<Class:0x007fe5df6067c0>):
  app/controllers/dashboard/v1/subscriptions_controller.rb:9:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (47.2ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:27:41 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>["[1,2,3]"]}
  [1m[35m (1.4ms)[0m  select sqlite_version(*)
  [1m[36mClass Create Many Without Validations Or Callbacks (4.4ms)[0m  [1mINSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,0,NULL,NULL,NULL,'2015-12-07 07:27:41.117774','2015-12-07 07:27:41.117808')[0m
Completed 500 Internal Server Error in 37ms (ActiveRecord: 6.5ms)

NoMethodError (undefined method `to_model' for #<Array:0x007fd1c10e0318>):
  app/controllers/dashboard/v1/subscriptions_controller.rb:10:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (5.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (64.7ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:29:01 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>["[1,2,3]"]}
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36mClass Create Many Without Validations Or Callbacks (2.8ms)[0m  [1mINSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,0,NULL,NULL,NULL,'2015-12-07 07:29:01.773388','2015-12-07 07:29:01.773407')[0m
Completed 201 Created in 15ms (Views: 4.0ms | ActiveRecord: 3.1ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:30:08 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>["[1,2,3]"]}
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36mClass Create Many Without Validations Or Callbacks (1.8ms)[0m  [1mINSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,0,NULL,NULL,NULL,'2015-12-07 07:30:08.937821','2015-12-07 07:30:08.937836')[0m
Completed 201 Created in 13ms (Views: 1.9ms | ActiveRecord: 2.1ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:30:12 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>["[1,2,3]"]}
  [1m[35mClass Create Many Without Validations Or Callbacks (1.8ms)[0m  INSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,0,NULL,NULL,NULL,'2015-12-07 07:30:12.889685','2015-12-07 07:30:12.889731')
Completed 201 Created in 5ms (Views: 1.1ms | ActiveRecord: 1.8ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:31:58 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>["1,2,3"]}
  [1m[36mClass Create Many Without Validations Or Callbacks (1.9ms)[0m  [1mINSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,1,NULL,NULL,NULL,'2015-12-07 07:31:58.477225','2015-12-07 07:31:58.477238')[0m
Completed 201 Created in 5ms (Views: 1.6ms | ActiveRecord: 1.9ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:32:14 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>["\"1\",\"2\",\"3\""]}
  [1m[35mClass Create Many Without Validations Or Callbacks (1.6ms)[0m  INSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,0,NULL,NULL,NULL,'2015-12-07 07:32:14.194785','2015-12-07 07:32:14.194797')
Completed 201 Created in 4ms (Views: 1.1ms | ActiveRecord: 1.6ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:33:53 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>[""]}
Completed 201 Created in 46ms (Views: 0.9ms | ActiveRecord: 0.3ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:34:41 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>[""]}
Completed 201 Created in 20ms (Views: 2.8ms | ActiveRecord: 0.2ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:35:00 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>["1, 2, 3"]}
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35mClass Create Many Without Validations Or Callbacks (1.7ms)[0m  INSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,1,NULL,NULL,NULL,'2015-12-07 07:35:00.943290','2015-12-07 07:35:00.943304')
Completed 201 Created in 5ms (Views: 1.4ms | ActiveRecord: 1.8ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:35:34 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>["[\"1\", \"2\", \"3\"]"]}
  [1m[36mClass Create Many Without Validations Or Callbacks (2.4ms)[0m  [1mINSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,0,NULL,NULL,NULL,'2015-12-07 07:35:34.129818','2015-12-07 07:35:34.129832')[0m
Completed 201 Created in 5ms (Views: 1.5ms | ActiveRecord: 2.4ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:38:17 +0100
Error occurred while parsing request parameters.
Contents:

------WebKitFormBoundaryiJwWoybdfEG4DfGL
Content-Disposition: form-data; name="organisation_id"

1
------WebKitFormBoundaryiJwWoybdfEG4DfGL
Content-Disposition: form-data; name="product_ids[]"


------WebKitFormBoundaryiJwWoybdfEG4DfGL--


ActionDispatch::ParamsParser::ParseError (795: unexpected token at '------WebKitFormBoundaryiJwWoybdfEG4DfGL
Content-Disposition: form-data; name="organisation_id"

1
------WebKitFormBoundaryiJwWoybdfEG4DfGL
Content-Disposition: form-data; name="product_ids[]"


------WebKitFormBoundaryiJwWoybdfEG4DfGL--
'):
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:53:in `rescue in parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:32:in `parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:23:in `call'
  activerecord (4.2.4) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.4) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (53.8ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:38:30 +0100
Error occurred while parsing request parameters.
Contents:

------WebKitFormBoundary4LcMJDK5rl2MYYGd
Content-Disposition: form-data; name="organisation_id"

1
------WebKitFormBoundary4LcMJDK5rl2MYYGd
Content-Disposition: form-data; name="product_ids[]"


------WebKitFormBoundary4LcMJDK5rl2MYYGd--


ActionDispatch::ParamsParser::ParseError (795: unexpected token at '------WebKitFormBoundary4LcMJDK5rl2MYYGd
Content-Disposition: form-data; name="organisation_id"

1
------WebKitFormBoundary4LcMJDK5rl2MYYGd
Content-Disposition: form-data; name="product_ids[]"


------WebKitFormBoundary4LcMJDK5rl2MYYGd--
'):
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:53:in `rescue in parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:32:in `parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:23:in `call'
  activerecord (4.2.4) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.4) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.1ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (48.1ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:38:37 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `each' for nil:NilClass):
  app/controllers/dashboard/v1/subscriptions_controller.rb:8:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (11.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (53.6ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:39:04 +0100
Error occurred while parsing request parameters.
Contents:

organisation_id=1&product_ids=%5B1%2C+2%2C+3%5D

ActionDispatch::ParamsParser::ParseError (795: unexpected token at 'organisation_id=1&product_ids=%5B1%2C+2%2C+3%5D'):
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:53:in `rescue in parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:32:in `parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:23:in `call'
  activerecord (4.2.4) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.4) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (46.4ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:39:19 +0100
Error occurred while parsing request parameters.
Contents:

organisation_id=1&product_ids=1%2C+2%2C+3

ActionDispatch::ParamsParser::ParseError (795: unexpected token at 'organisation_id=1&product_ids=1%2C+2%2C+3'):
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:53:in `rescue in parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:32:in `parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:23:in `call'
  activerecord (4.2.4) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.4) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (49.2ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:39:27 +0100
Error occurred while parsing request parameters.
Contents:

organisation_id=1&product_ids=%7B1%2C+2%2C+3%7D

ActionDispatch::ParamsParser::ParseError (795: unexpected token at 'organisation_id=1&product_ids=%7B1%2C+2%2C+3%7D'):
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:53:in `rescue in parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:32:in `parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:23:in `call'
  activerecord (4.2.4) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.4) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (46.6ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:39:41 +0100
Error occurred while parsing request parameters.
Contents:

organisation_id=1&product_ids=%221%22%2C%222%22%2C%223%22

ActionDispatch::ParamsParser::ParseError (795: unexpected token at 'organisation_id=1&product_ids=%221%22%2C%222%22%2C%223%22'):
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:53:in `rescue in parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:32:in `parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:23:in `call'
  activerecord (4.2.4) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.4) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (44.4ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:39:54 +0100
Error occurred while parsing request parameters.
Contents:

organisation_id=1&product_ids=%5B%221%22%2C%222%22%2C%223%5D

ActionDispatch::ParamsParser::ParseError (795: unexpected token at 'organisation_id=1&product_ids=%5B%221%22%2C%222%22%2C%223%5D'):
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:53:in `rescue in parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:32:in `parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:23:in `call'
  activerecord (4.2.4) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.4) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (55.2ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:39:59 +0100
Error occurred while parsing request parameters.
Contents:

organisation_id=1&product_ids=%5B%221%22%2C%222%22%2C%223%22%5D

ActionDispatch::ParamsParser::ParseError (795: unexpected token at 'organisation_id=1&product_ids=%5B%221%22%2C%222%22%2C%223%22%5D'):
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:53:in `rescue in parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:32:in `parse_formatted_parameters'
  actionpack (4.2.4) lib/action_dispatch/middleware/params_parser.rb:23:in `call'
  activerecord (4.2.4) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:653:in `call'
  activerecord (4.2.4) lib/active_record/migration.rb:377:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.4) lib/active_support/callbacks.rb:88:in `__run_callbacks__'
  activesupport (4.2.4) lib/active_support/callbacks.rb:778:in `_run_call_callbacks'
  activesupport (4.2.4) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.4) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.4) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.4) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.4) lib/rails/rack/logger.rb:20:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.4) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.4) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.4) lib/action_dispatch/middleware/static.rb:116:in `call'
  railties (4.2.4) lib/rails/engine.rb:518:in `call'
  railties (4.2.4) lib/rails/application.rb:165:in `call'
  rack (1.6.4) lib/rack/lock.rb:17:in `call'
  rack (1.6.4) lib/rack/content_length.rb:15:in `call'
  rack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /Users/timi/.rbenv/versions/2.2.3/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (43.4ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:40:10 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>[""]}
Completed 201 Created in 2ms (Views: 0.8ms | ActiveRecord: 0.0ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:40:28 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>["1, 2, 3"]}
  [1m[35mClass Create Many Without Validations Or Callbacks (1.7ms)[0m  INSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,1,NULL,NULL,NULL,'2015-12-07 07:40:28.781258','2015-12-07 07:40:28.781270')
Completed 201 Created in 4ms (Views: 1.1ms | ActiveRecord: 1.7ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:40:52 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>["'1' , '2', ' 3'"]}
  [1m[36mClass Create Many Without Validations Or Callbacks (1.7ms)[0m  [1mINSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,0,NULL,NULL,NULL,'2015-12-07 07:40:52.321777','2015-12-07 07:40:52.321789')[0m
Completed 201 Created in 4ms (Views: 1.2ms | ActiveRecord: 1.7ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:41:07 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>["{1, 2, 3}"]}
  [1m[35mClass Create Many Without Validations Or Callbacks (2.1ms)[0m  INSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,0,NULL,NULL,NULL,'2015-12-07 07:41:07.711645','2015-12-07 07:41:07.711684')
Completed 201 Created in 6ms (Views: 1.1ms | ActiveRecord: 2.1ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:41:26 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `each' for "1,2,3":String):
  app/controllers/dashboard/v1/subscriptions_controller.rb:8:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (51.7ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:41:37 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"[1,2,3]"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `each' for "[1,2,3]":String):
  app/controllers/dashboard/v1/subscriptions_controller.rb:8:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (57.1ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:41:54 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>["1,2,3"]}
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35mClass Create Many Without Validations Or Callbacks (1.7ms)[0m  INSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,1,NULL,NULL,NULL,'2015-12-07 07:41:54.533146','2015-12-07 07:41:54.533169')
Completed 201 Created in 14ms (Views: 0.8ms | ActiveRecord: 2.0ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:43:29 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35mClass Create Many Without Validations Or Callbacks (1.9ms)[0m  INSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,1,NULL,NULL,NULL,'2015-12-07 07:43:29.410296','2015-12-07 07:43:29.410308'),(NULL,1,2,NULL,NULL,NULL,'2015-12-07 07:43:29.410296','2015-12-07 07:43:29.410308'),(NULL,1,3,NULL,NULL,NULL,'2015-12-07 07:43:29.410296','2015-12-07 07:43:29.410308')
Completed 201 Created in 19ms (Views: 1.8ms | ActiveRecord: 2.2ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 08:49:57 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35mClass Create Many Without Validations Or Callbacks (1.9ms)[0m  INSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (NULL,1,1,NULL,NULL,NULL,'2015-12-07 07:49:57.326171','2015-12-07 07:49:57.326185'),(NULL,1,2,NULL,NULL,NULL,'2015-12-07 07:49:57.326171','2015-12-07 07:49:57.326185'),(NULL,1,3,NULL,NULL,NULL,'2015-12-07 07:49:57.326171','2015-12-07 07:49:57.326185')
Completed 201 Created in 19ms (Views: 2.8ms | ActiveRecord: 2.2ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddDeletedAtToProductsSubscriptionsAndKeyWordOptions (20151207081957)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.5ms)[0m  [1mALTER TABLE "products" ADD "deleted_at" datetime[0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.2ms)[0m  [1mCREATE  INDEX "index_products_on_deleted_at" ON "products" ("deleted_at")[0m
  [1m[35m (0.6ms)[0m  ALTER TABLE "subscriptions" ADD "deleted_at" datetime
  [1m[36m (0.7ms)[0m  [1mCREATE  INDEX "index_subscriptions_on_deleted_at" ON "subscriptions" ("deleted_at")[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "key_word_options" ADD "deleted_at" datetime
  [1m[36m (0.2ms)[0m  [1mCREATE  INDEX "index_key_word_options_on_deleted_at" ON "key_word_options" ("deleted_at")[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207081957"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.8ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_key_word_options_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_key_word_options_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.7ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 09:21:30 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36mClass Create Many Without Validations Or Callbacks (1.6ms)[0m  [1mINSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at","deleted_at") VALUES (NULL,1,1,NULL,NULL,NULL,'2015-12-07 08:21:30.394508','2015-12-07 08:21:30.394526',NULL),(NULL,1,2,NULL,NULL,NULL,'2015-12-07 08:21:30.394508','2015-12-07 08:21:30.394526',NULL),(NULL,1,3,NULL,NULL,NULL,'2015-12-07 08:21:30.394508','2015-12-07 08:21:30.394526',NULL)[0m
Completed 201 Created in 18ms (Views: 1.9ms | ActiveRecord: 1.8ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 09:21:41 +0100
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36mClass Create Many Without Validations Or Callbacks (1.7ms)[0m  [1mINSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at","deleted_at") VALUES (NULL,1,1,NULL,NULL,NULL,'2015-12-07 08:21:41.831416','2015-12-07 08:21:41.831457',NULL),(NULL,1,2,NULL,NULL,NULL,'2015-12-07 08:21:41.831416','2015-12-07 08:21:41.831457',NULL),(NULL,1,3,NULL,NULL,NULL,'2015-12-07 08:21:41.831416','2015-12-07 08:21:41.831457',NULL)[0m
Completed 201 Created in 37ms (Views: 2.0ms | ActiveRecord: 2.6ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 09:22:21 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36mClass Create Many Without Validations Or Callbacks (2.5ms)[0m  [1mINSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at","deleted_at") VALUES (NULL,1,1,NULL,NULL,NULL,'2015-12-07 08:22:21.649225','2015-12-07 08:22:21.649239',NULL),(NULL,1,2,NULL,NULL,NULL,'2015-12-07 08:22:21.649225','2015-12-07 08:22:21.649239',NULL),(NULL,1,3,NULL,NULL,NULL,'2015-12-07 08:22:21.649225','2015-12-07 08:22:21.649239',NULL)[0m
Completed 201 Created in 22ms (Views: 4.0ms | ActiveRecord: 2.9ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 09:24:02 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[35mClass Create Many Without Validations Or Callbacks (2.3ms)[0m  INSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at","deleted_at") VALUES (NULL,1,1,NULL,NULL,NULL,'2015-12-07 08:24:02.083338','2015-12-07 08:24:02.083357',NULL),(NULL,1,2,NULL,NULL,NULL,'2015-12-07 08:24:02.083338','2015-12-07 08:24:02.083357',NULL),(NULL,1,3,NULL,NULL,NULL,'2015-12-07 08:24:02.083338','2015-12-07 08:24:02.083357',NULL)
Completed 201 Created in 9ms (Views: 3.2ms | ActiveRecord: 2.3ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 09:25:46 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[36mSubscription Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 1) LIMIT 1[0m
  [1m[35mSubscription Exists (0.1ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 2) LIMIT 1
  [1m[36mSubscription Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 3) LIMIT 1[0m
Completed 201 Created in 70ms (Views: 1.8ms | ActiveRecord: 0.7ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 09:33:18 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["organisation_id", 1], ["product_id", 1], ["created_at", "2015-12-07 08:33:19.016054"], ["updated_at", "2015-12-07 08:33:19.016054"]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["organisation_id", 1], ["product_id", 2], ["created_at", "2015-12-07 08:33:19.020943"], ["updated_at", "2015-12-07 08:33:19.020943"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["organisation_id", 1], ["product_id", 3], ["created_at", "2015-12-07 08:33:19.025846"], ["updated_at", "2015-12-07 08:33:19.025846"]]
  [1m[36m (2.7ms)[0m  [1mcommit transaction[0m
Completed 500 Internal Server Error in 32ms (ActiveRecord: 8.1ms)

SyntaxError (/Users/timi/gigster-locent-api/app/serializers/subscription_serializer.rb:3: syntax error, unexpected keyword_end):
  app/serializers/subscription_serializer.rb:3: syntax error, unexpected keyword_end
  app/controllers/dashboard/v1/subscriptions_controller.rb:12:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (55.5ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 09:33:35 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.7ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 2) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 3) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 201 Created in 38ms (Views: 1.9ms | ActiveRecord: 2.8ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 09:34:12 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.2ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 2) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.1ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 3) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Completed 201 Created in 26ms (Views: 1.9ms | ActiveRecord: 1.0ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 09:35:17 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["organisation_id", 1], ["product_id", 1], ["created_at", "2015-12-07 08:35:18.059970"], ["updated_at", "2015-12-07 08:35:18.059970"]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["organisation_id", 1], ["product_id", 2], ["created_at", "2015-12-07 08:35:18.065485"], ["updated_at", "2015-12-07 08:35:18.065485"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["organisation_id", 1], ["product_id", 3], ["created_at", "2015-12-07 08:35:18.072831"], ["updated_at", "2015-12-07 08:35:18.072831"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
Completed 201 Created in 41ms (Views: 1.6ms | ActiveRecord: 7.4ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 09:35:39 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["organisation_id", 1], ["product_id", 1], ["created_at", "2015-12-07 08:35:40.056248"], ["updated_at", "2015-12-07 08:35:40.056248"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 2) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["organisation_id", 1], ["product_id", 2], ["created_at", "2015-12-07 08:35:40.060333"], ["updated_at", "2015-12-07 08:35:40.060333"]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."product_id" = 3) LIMIT 1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["organisation_id", 1], ["product_id", 3], ["created_at", "2015-12-07 08:35:40.065768"], ["updated_at", "2015-12-07 08:35:40.065768"]]
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
Completed 201 Created in 32ms (Views: 1.9ms | ActiveRecord: 7.7ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateClearCartOptions (20151207083656)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "clear_cart_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "intial_cart_abandonment_message" text, "follow_up_message" text, "cancellation_message" text, "confirmation_message" text, "number_of_times_to_message" text, "time_interval_between_messages" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207083656"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_key_word_options_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_key_word_options_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateSafeTextOptions (20151207085210)
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36m (1.1ms)[0m  [1mCREATE TABLE "safe_text_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207085210"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_key_word_options_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_key_word_options_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'

  [1m[36m (0.3ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateSafeTextOptions (20151207085210)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.9ms)[0m  DROP TABLE "safe_text_options"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20151207085210"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_key_word_options_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_key_word_options_on_deleted_at' AND type='index'

  [1m[36m (0.3ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateClearCartOptions (20151207083656)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  DROP TABLE "clear_cart_options"
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20151207083656"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_key_word_options_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_key_word_options_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to AddDeletedAtToProductsSubscriptionsAndKeyWordOptions (20151207081957)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_key_word_options_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_key_word_options_on_deleted_at' AND type='index'

  [1m[36m (0.3ms)[0m  [1mDROP INDEX "index_key_word_options_on_deleted_at"[0m
  [1m[35m (0.3ms)[0m  CREATE TEMPORARY TABLE "akey_word_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "key_word_options"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "key_word_options"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "key_word_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "akey_word_options"
  [1m[36m (0.2ms)[0m  [1mDROP TABLE "akey_word_options"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1mDROP INDEX "index_subscriptions_on_deleted_at"[0m
  [1m[35m (0.2ms)[0m  CREATE TEMPORARY TABLE "asubscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_id" integer, "product_id" integer, "short_code" integer, "option_id" varchar, "option_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (0.3ms)[0m  [1mSELECT * FROM "subscriptions"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "asubscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at","deleted_at") VALUES (37, 1, 1, NULL, NULL, NULL, '2015-12-07 08:35:40.056248', '2015-12-07 08:35:40.056248', NULL)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "asubscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at","deleted_at") VALUES (38, 1, 2, NULL, NULL, NULL, '2015-12-07 08:35:40.060333', '2015-12-07 08:35:40.060333', NULL)[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "asubscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at","deleted_at") VALUES (39, 1, 3, NULL, NULL, NULL, '2015-12-07 08:35:40.065768', '2015-12-07 08:35:40.065768', NULL)
  [1m[36m (0.2ms)[0m  [1mDROP TABLE "subscriptions"[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_id" integer, "product_id" integer, "short_code" integer, "option_id" varchar, "option_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "asubscriptions"[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (37, 1, 1, NULL, NULL, NULL, '2015-12-07 08:35:40.056248', '2015-12-07 08:35:40.056248')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (38, 1, 2, NULL, NULL, NULL, '2015-12-07 08:35:40.060333', '2015-12-07 08:35:40.060333')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "subscriptions" ("id","organisation_id","product_id","short_code","option_id","option_type","created_at","updated_at") VALUES (39, 1, 3, NULL, NULL, NULL, '2015-12-07 08:35:40.065768', '2015-12-07 08:35:40.065768')
  [1m[36m (0.3ms)[0m  [1mDROP TABLE "asubscriptions"[0m
  [1m[35m (0.3ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_deleted_at' AND type='index'

  [1m[36m (0.5ms)[0m  [1mDROP INDEX "index_products_on_deleted_at"[0m
  [1m[35m (0.2ms)[0m  CREATE TEMPORARY TABLE "aproducts" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "has_items" boolean DEFAULT 'f', "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "products"[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "aproducts" ("id","name","has_items","created_at","updated_at","deleted_at") VALUES (1, 'Keyword', 't', '2015-12-06 18:25:27.430096', '2015-12-06 18:25:27.430096', NULL)
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "aproducts" ("id","name","has_items","created_at","updated_at","deleted_at") VALUES (2, 'Clearcart', 'f', '2015-12-06 18:25:27.436091', '2015-12-06 18:25:27.436091', NULL)[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "aproducts" ("id","name","has_items","created_at","updated_at","deleted_at") VALUES (3, 'Safetext', 'f', '2015-12-06 18:25:27.438804', '2015-12-06 18:25:27.438804', NULL)
  [1m[36m (0.2ms)[0m  [1mDROP TABLE "products"[0m
  [1m[35m (0.1ms)[0m  CREATE TABLE "products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "has_items" boolean DEFAULT 'f', "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.0ms)[0m  [1mSELECT * FROM "aproducts"[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "products" ("id","name","has_items","created_at","updated_at") VALUES (1, 'Keyword', 't', '2015-12-06 18:25:27.430096', '2015-12-06 18:25:27.430096')
  [1m[36m (0.0ms)[0m  [1mINSERT INTO "products" ("id","name","has_items","created_at","updated_at") VALUES (2, 'Clearcart', 'f', '2015-12-06 18:25:27.436091', '2015-12-06 18:25:27.436091')[0m
  [1m[35m (0.0ms)[0m  INSERT INTO "products" ("id","name","has_items","created_at","updated_at") VALUES (3, 'Safetext', 'f', '2015-12-06 18:25:27.438804', '2015-12-06 18:25:27.438804')
  [1m[36m (0.1ms)[0m  [1mDROP TABLE "aproducts"[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?  [["version", "20151207081957"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateKeyWordOptions (20151207063309)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  DROP TABLE "key_word_options"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20151207063309"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateKeyWordOptions (20151207063309)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mCREATE TABLE "keyword_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207063309"]]
  [1m[36m (2.2ms)[0m  [1mcommit transaction[0m
Migrating to AddDeletedAtToProductsSubscriptionsAndKeyWordOptions (20151207081957)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "products" ADD "deleted_at" datetime[0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.2ms)[0m  [1mCREATE  INDEX "index_products_on_deleted_at" ON "products" ("deleted_at")[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "subscriptions" ADD "deleted_at" datetime
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_subscriptions_on_deleted_at" ON "subscriptions" ("deleted_at")[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "keyword_options" ADD "deleted_at" datetime
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_keyword_options_on_deleted_at" ON "keyword_options" ("deleted_at")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207081957"]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
Migrating to CreateClearCartOptions (20151207083656)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TABLE "clearcart_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "intial_cart_abandonment_message" text, "follow_up_message" text, "cancellation_message" text, "confirmation_message" text, "number_of_times_to_message" text, "time_interval_between_messages" text, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207083656"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
Migrating to CreateSafeTextOptions (20151207085210)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mCREATE TABLE "safetext_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207085210"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.3ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 10:02:21 +0100
  [1m[35mActiveRecord::SchemaMigration Load (1.0ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[36mProduct Load (0.3ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."deleted_at" IS NULL AND "products"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 21ms (ActiveRecord: 0.6ms)

NoMethodError (undefined method `+' for nil:NilClass):
  app/controllers/dashboard/v1/subscriptions_controller.rb:11:in `block in create'
  app/controllers/dashboard/v1/subscriptions_controller.rb:9:in `each'
  app/controllers/dashboard/v1/subscriptions_controller.rb:9:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (3.7ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.9ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (47.2ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 10:04:05 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[35mProduct Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."deleted_at" IS NULL AND "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.2ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."product_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["organisation_id", 1], ["product_id", 1], ["created_at", "2015-12-07 09:04:05.822840"], ["updated_at", "2015-12-07 09:04:05.822840"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.1ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."id" != 40 AND "subscriptions"."product_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "keyword_options" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-12-07 09:04:05.836763"], ["updated_at", "2015-12-07 09:04:05.836763"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "subscriptions" SET "option_type" = ?, "option_id" = ?, "updated_at" = ? WHERE "subscriptions"."id" = ?  [["option_type", "KeywordOptions"], ["option_id", "1"], ["updated_at", "2015-12-07 09:04:05.838044"], ["id", 40]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35mProduct Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."deleted_at" IS NULL AND "products"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.1ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."product_id" = 2) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["organisation_id", 1], ["product_id", 2], ["created_at", "2015-12-07 09:04:05.857309"], ["updated_at", "2015-12-07 09:04:05.857309"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.4ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."id" != 41 AND "subscriptions"."product_id" = 2) LIMIT 1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "clearcart_options" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-12-07 09:04:05.863389"], ["updated_at", "2015-12-07 09:04:05.863389"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "subscriptions" SET "option_type" = ?, "option_id" = ?, "updated_at" = ? WHERE "subscriptions"."id" = ?  [["option_type", "ClearcartOptions"], ["option_id", "1"], ["updated_at", "2015-12-07 09:04:05.866670"], ["id", 41]]
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
  [1m[35mProduct Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."deleted_at" IS NULL AND "products"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.1ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."product_id" = 3) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["organisation_id", 1], ["product_id", 3], ["created_at", "2015-12-07 09:04:05.884840"], ["updated_at", "2015-12-07 09:04:05.884840"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.1ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."id" != 42 AND "subscriptions"."product_id" = 3) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "safetext_options" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-12-07 09:04:05.888741"], ["updated_at", "2015-12-07 09:04:05.888741"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "subscriptions" SET "option_type" = ?, "option_id" = ?, "updated_at" = ? WHERE "subscriptions"."id" = ?  [["option_type", "SafetextOptions"], ["option_id", "1"], ["updated_at", "2015-12-07 09:04:05.890008"], ["id", 42]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
Completed 201 Created in 113ms (Views: 2.2ms | ActiveRecord: 15.2ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateSafeTextOptions (20151207085210)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  DROP TABLE "safetext_options"
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20151207085210"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateClearCartOptions (20151207083656)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.9ms)[0m  DROP TABLE "clearcart_options"
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20151207083656"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateClearCartOptions (20151207083656)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (2.2ms)[0m  [1mCREATE TABLE "clearcart_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "intial_cart_abandonment_message" text, "follow_up_message" text, "cancellation_message" text, "confirmation_message" text, "number_of_times_to_message" integer, "time_interval_between_messages" integer, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207083656"]]
  [1m[36m (2.2ms)[0m  [1mcommit transaction[0m
Migrating to CreateSafeTextOptions (20151207085210)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.8ms)[0m  [1mCREATE TABLE "safetext_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207085210"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.4ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.3ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 10:17:29 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[35mProduct Load (0.2ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."deleted_at" IS NULL AND "products"."id" = ? LIMIT 1  [["id", 1]]
Completed 404 Not Found in 7ms (ActiveRecord: 0.4ms)

ActiveRecord::RecordNotFound (Couldn't find Product with 'id'=1 [WHERE "products"."deleted_at" IS NULL]):
  app/controllers/dashboard/v1/subscriptions_controller.rb:10:in `block in create'
  app/controllers/dashboard/v1/subscriptions_controller.rb:9:in `each'
  app/controllers/dashboard/v1/subscriptions_controller.rb:9:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (52.3ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "products" ("name", "has_items", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Keyword"], ["has_items", "t"], ["created_at", "2015-12-07 09:18:02.939612"], ["updated_at", "2015-12-07 09:18:02.939612"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Clearcart"], ["created_at", "2015-12-07 09:18:02.946598"], ["updated_at", "2015-12-07 09:18:02.946598"]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Safetext"], ["created_at", "2015-12-07 09:18:02.949911"], ["updated_at", "2015-12-07 09:18:02.949911"]]
  [1m[35m (1.4ms)[0m  commit transaction


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 10:18:19 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[36mProduct Load (0.1ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."deleted_at" IS NULL AND "products"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."product_id" = 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.3ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."product_id" = 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35mProduct Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."deleted_at" IS NULL AND "products"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.2ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."product_id" = 2) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."product_id" = 2) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mProduct Load (0.2ms)[0m  [1mSELECT  "products".* FROM "products" WHERE "products"."deleted_at" IS NULL AND "products"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSubscription Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."product_id" = 3) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.3ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."product_id" = 3) LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
Completed 201 Created in 110ms (Views: 3.4ms | ActiveRecord: 4.6ms)
  [1m[36m (1.9ms)[0m  [1mCREATE TABLE "clearcart_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "intial_cart_abandonment_message" text, "follow_up_message" text, "cancellation_message" text, "confirmation_message" text, "number_of_times_to_message" integer, "time_interval_between_messages" integer, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (2.0ms)[0m  CREATE TABLE "keyword_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (1.6ms)[0m  CREATE  INDEX "index_keyword_options_on_deleted_at" ON "keyword_options" ("deleted_at")
  [1m[36m (1.6ms)[0m  [1mCREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) [0m
  [1m[35m (1.6ms)[0m  CREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")
  [1m[36m (1.9ms)[0m  [1mCREATE TABLE "products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "has_items" boolean DEFAULT 'f', "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) [0m
  [1m[35m (2.2ms)[0m  CREATE  INDEX "index_products_on_deleted_at" ON "products" ("deleted_at")
  [1m[36m (2.0ms)[0m  [1mCREATE TABLE "safetext_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (2.1ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_id" integer, "product_id" integer, "short_code" integer, "option_id" varchar, "option_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (1.9ms)[0m  [1mCREATE  INDEX "index_subscriptions_on_deleted_at" ON "subscriptions" ("deleted_at")[0m
  [1m[35m (2.2ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar DEFAULT 'email' NOT NULL, "uid" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "confirmation_token" varchar, "confirmed_at" datetime, "confirmation_sent_at" datetime, "unconfirmed_email" varchar, "first_name" varchar, "last_name" varchar, "email" varchar, "tokens" text, "created_at" datetime, "updated_at" datetime, "organisation_id" integer, "is_primary" boolean DEFAULT 'f') 
  [1m[36m (1.1ms)[0m  [1mCREATE  INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (1.8ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (2.6ms)[0m  CREATE UNIQUE INDEX "index_users_on_uid_and_provider" ON "users" ("uid", "provider")
  [1m[36m (2.3ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (2.4ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")
  [1m[36m (0.1ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151207085210')
  [1m[36m (2.0ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151204154935')[0m
  [1m[35m (3.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151204163514')
  [1m[36m (3.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151205114111')[0m
  [1m[35m (1.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151205133938')
  [1m[36m (1.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206030525')[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206030931')
  [1m[36m (1.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206035714')[0m
  [1m[35m (2.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206112033')
  [1m[36m (1.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206134750')[0m
  [1m[35m (2.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206135859')
  [1m[36m (1.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206140817')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206164658')
  [1m[36m (1.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206182109')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206190416')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151207063309')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151207081957')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151207083656')[0m
  [1m[35m (2.0ms)[0m  CREATE TABLE "clearcart_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "intial_cart_abandonment_message" text, "follow_up_message" text, "cancellation_message" text, "confirmation_message" text, "number_of_times_to_message" integer, "time_interval_between_messages" integer, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (1.5ms)[0m  [1mCREATE TABLE "keyword_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.4ms)[0m  [1mCREATE  INDEX "index_keyword_options_on_deleted_at" ON "keyword_options" ("deleted_at")[0m
  [1m[35m (1.8ms)[0m  CREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (2.7ms)[0m  [1mCREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")[0m
  [1m[35m (2.0ms)[0m  CREATE TABLE "products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "has_items" boolean DEFAULT 'f', "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (1.3ms)[0m  [1mCREATE  INDEX "index_products_on_deleted_at" ON "products" ("deleted_at")[0m
  [1m[35m (1.6ms)[0m  CREATE TABLE "safetext_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (1.9ms)[0m  [1mCREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_id" integer, "product_id" integer, "short_code" integer, "option_id" varchar, "option_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) [0m
  [1m[35m (1.9ms)[0m  CREATE  INDEX "index_subscriptions_on_deleted_at" ON "subscriptions" ("deleted_at")
  [1m[36m (2.4ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar DEFAULT 'email' NOT NULL, "uid" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "confirmation_token" varchar, "confirmed_at" datetime, "confirmation_sent_at" datetime, "unconfirmed_email" varchar, "first_name" varchar, "last_name" varchar, "email" varchar, "tokens" text, "created_at" datetime, "updated_at" datetime, "organisation_id" integer, "is_primary" boolean DEFAULT 'f') [0m
  [1m[35m (1.9ms)[0m  CREATE  INDEX "index_users_on_email" ON "users" ("email")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (2.1ms)[0m  CREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")
  [1m[36m (0.5ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (2.2ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_uid_and_provider" ON "users" ("uid", "provider")[0m
  [1m[35m (2.1ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar NOT NULL) 
  [1m[36m (1.8ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (1.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151207085210')[0m
  [1m[35m (1.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151204154935')
  [1m[36m (1.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151204163514')[0m
  [1m[35m (1.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151205114111')
  [1m[36m (2.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151205133938')[0m
  [1m[35m (2.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206030525')
  [1m[36m (1.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206030931')[0m
  [1m[35m (2.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206035714')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206112033')[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206134750')
  [1m[36m (1.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206135859')[0m
  [1m[35m (0.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206140817')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206164658')[0m
  [1m[35m (1.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151206182109')
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151206190416')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151207063309')
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20151207081957')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20151207083656')
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "has_items", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Keyword"], ["has_items", "t"], ["created_at", "2015-12-07 09:24:13.195160"], ["updated_at", "2015-12-07 09:24:13.195160"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Clearcart"], ["created_at", "2015-12-07 09:24:13.198878"], ["updated_at", "2015-12-07 09:24:13.198878"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Safetext"], ["created_at", "2015-12-07 09:24:13.202195"], ["updated_at", "2015-12-07 09:24:13.202195"]]
  [1m[35m (3.0ms)[0m  commit transaction
  [1m[36m (2.0ms)[0m  [1mDROP TABLE "clearcart_options"[0m
  [1m[35m (1.9ms)[0m  CREATE TABLE "clearcart_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "intial_cart_abandonment_message" text, "follow_up_message" text, "cancellation_message" text, "confirmation_message" text, "number_of_times_to_message" integer, "time_interval_between_messages" integer, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (1.6ms)[0m  [1mDROP TABLE "keyword_options"[0m
  [1m[35m (1.6ms)[0m  CREATE TABLE "keyword_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (1.5ms)[0m  CREATE  INDEX "index_keyword_options_on_deleted_at" ON "keyword_options" ("deleted_at")
  [1m[36m (1.7ms)[0m  [1mDROP TABLE "organisations"[0m
  [1m[35m (2.1ms)[0m  CREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (1.8ms)[0m  [1mCREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")[0m
  [1m[35m (3.3ms)[0m  DROP TABLE "products"
  [1m[36m (2.3ms)[0m  [1mCREATE TABLE "products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "has_items" boolean DEFAULT 'f', "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) [0m
  [1m[35m (2.4ms)[0m  CREATE  INDEX "index_products_on_deleted_at" ON "products" ("deleted_at")
  [1m[36m (1.9ms)[0m  [1mDROP TABLE "safetext_options"[0m
  [1m[35m (2.4ms)[0m  CREATE TABLE "safetext_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (1.9ms)[0m  [1mDROP TABLE "subscriptions"[0m
  [1m[35m (2.2ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_id" integer, "product_id" integer, "short_code" integer, "option_id" varchar, "option_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (1.3ms)[0m  [1mCREATE  INDEX "index_subscriptions_on_deleted_at" ON "subscriptions" ("deleted_at")[0m
  [1m[35m (3.1ms)[0m  DROP TABLE "users"
  [1m[36m (1.9ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar DEFAULT 'email' NOT NULL, "uid" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "confirmation_token" varchar, "confirmed_at" datetime, "confirmation_sent_at" datetime, "unconfirmed_email" varchar, "first_name" varchar, "last_name" varchar, "email" varchar, "tokens" text, "created_at" datetime, "updated_at" datetime, "organisation_id" integer, "is_primary" boolean DEFAULT 'f') [0m
  [1m[35m (3.0ms)[0m  CREATE  INDEX "index_users_on_email" ON "users" ("email")
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (2.1ms)[0m  CREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (1.8ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_uid_and_provider" ON "users" ("uid", "provider")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (1.9ms)[0m  [1mDROP TABLE "clearcart_options"[0m
  [1m[35m (2.0ms)[0m  CREATE TABLE "clearcart_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "intial_cart_abandonment_message" text, "follow_up_message" text, "cancellation_message" text, "confirmation_message" text, "number_of_times_to_message" integer, "time_interval_between_messages" integer, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (2.5ms)[0m  [1mDROP TABLE "keyword_options"[0m
  [1m[35m (2.2ms)[0m  CREATE TABLE "keyword_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (0.1ms)[0m  [1mselect sqlite_version(*)[0m
  [1m[35m (1.8ms)[0m  CREATE  INDEX "index_keyword_options_on_deleted_at" ON "keyword_options" ("deleted_at")
  [1m[36m (2.7ms)[0m  [1mDROP TABLE "organisations"[0m
  [1m[35m (2.5ms)[0m  CREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (1.7ms)[0m  [1mCREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")[0m
  [1m[35m (1.2ms)[0m  DROP TABLE "products"
  [1m[36m (2.2ms)[0m  [1mCREATE TABLE "products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "has_items" boolean DEFAULT 'f', "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) [0m
  [1m[35m (1.6ms)[0m  CREATE  INDEX "index_products_on_deleted_at" ON "products" ("deleted_at")
  [1m[36m (1.6ms)[0m  [1mDROP TABLE "safetext_options"[0m
  [1m[35m (2.0ms)[0m  CREATE TABLE "safetext_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (1.8ms)[0m  [1mDROP TABLE "subscriptions"[0m
  [1m[35m (2.5ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_id" integer, "product_id" integer, "short_code" integer, "option_id" varchar, "option_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (1.9ms)[0m  [1mCREATE  INDEX "index_subscriptions_on_deleted_at" ON "subscriptions" ("deleted_at")[0m
  [1m[35m (1.9ms)[0m  DROP TABLE "users"
  [1m[36m (1.7ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar DEFAULT 'email' NOT NULL, "uid" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "confirmation_token" varchar, "confirmed_at" datetime, "confirmation_sent_at" datetime, "unconfirmed_email" varchar, "first_name" varchar, "last_name" varchar, "email" varchar, "tokens" text, "created_at" datetime, "updated_at" datetime, "organisation_id" integer, "is_primary" boolean DEFAULT 'f') [0m
  [1m[35m (1.8ms)[0m  CREATE  INDEX "index_users_on_email" ON "users" ("email")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (1.6ms)[0m  CREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (2.1ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_uid_and_provider" ON "users" ("uid", "provider")[0m
  [1m[35m (0.2ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "has_items", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Keyword"], ["has_items", "t"], ["created_at", "2015-12-07 09:24:21.825716"], ["updated_at", "2015-12-07 09:24:21.825716"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Clearcart"], ["created_at", "2015-12-07 09:24:21.829432"], ["updated_at", "2015-12-07 09:24:21.829432"]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Safetext"], ["created_at", "2015-12-07 09:24:21.832576"], ["updated_at", "2015-12-07 09:24:21.832576"]]
  [1m[35m (1.8ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "products" ("name", "has_items", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["name", "Keyword"], ["has_items", "t"], ["created_at", "2015-12-07 09:24:33.326689"], ["updated_at", "2015-12-07 09:24:33.326689"]]
  [1m[35m (1.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Clearcart"], ["created_at", "2015-12-07 09:24:33.332432"], ["updated_at", "2015-12-07 09:24:33.332432"]]
  [1m[36m (2.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["name", "Safetext"], ["created_at", "2015-12-07 09:24:33.337641"], ["updated_at", "2015-12-07 09:24:33.337641"]]
  [1m[35m (1.4ms)[0m  commit transaction


Started POST "/dashboard/organisations" for ::1 at 2015-12-07 10:26:43 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, format
Completed 500 Internal Server Error in 121ms (ActiveRecord: 0.4ms)

ActiveRecord::UnknownAttributeError (unknown attribute 'deleted_at' for User.):
  app/controllers/dashboard/v1/organisations_controller.rb:34:in `create_primary_user_account'
  app/controllers/dashboard/v1/organisations_controller.rb:15:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.3ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (0.8ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (56.3ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m


Started POST "/dashboard/organisations" for ::1 at 2015-12-07 10:27:40 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, format
Completed 500 Internal Server Error in 103ms (ActiveRecord: 0.4ms)

ActiveRecord::UnknownAttributeError (unknown attribute 'deleted_at' for User.):
  app/controllers/dashboard/v1/organisations_controller.rb:34:in `create_primary_user_account'
  app/controllers/dashboard/v1/organisations_controller.rb:15:in `create'


  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.6ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.5ms)
  Rendered /Users/timi/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/actionpack-4.2.4/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (60.6ms)
  [1m[36m (2.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.8ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateOrganisations (20151204154935)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151204154935"]]
  [1m[35m (1.4ms)[0m  commit transaction
Migrating to DeviseCreateUsers (20151204163514)
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "first_name" varchar, "last_name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151204163514"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
Migrating to ChangePrimaryUserToPrimaryUserId (20151205114111)
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mCREATE TEMPORARY TABLE "aorganisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user_id" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.1ms)[0m  SELECT * FROM "organisations"
  [1m[36m (0.3ms)[0m  [1mDROP TABLE "organisations"[0m
  [1m[35m (0.2ms)[0m  CREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user_id" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.0ms)[0m  [1mSELECT * FROM "aorganisations"[0m
  [1m[35m (0.3ms)[0m  DROP TABLE "aorganisations"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151205114111"]]
  [1m[35m (2.4ms)[0m  commit transaction
Migrating to AddOrganisationIdToUsers (20151205133938)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD "organisation_id" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151205133938"]]
  [1m[35m (1.5ms)[0m  commit transaction
Migrating to AddDeletedAtToOrganisationsAndUsers (20151206030525)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "organisations" ADD "deleted_at" datetime
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "users" ADD "deleted_at" datetime
  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_users_on_deleted_at" ON "users" ("deleted_at")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206030525"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
Migrating to AddIndexesToOrganisationsAndUsers (20151206030931)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.5ms)[0m  CREATE  INDEX "index_users_on_organisation_id" ON "users" ("organisation_id")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  CREATE  INDEX "index_organisations_on_primary_user_id" ON "organisations" ("primary_user_id")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151206030931"]]
  [1m[35m (1.5ms)[0m  commit transaction
Migrating to AddAuthenticationTokenToUsers (20151206035714)
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "users" ADD "auth_token" varchar DEFAULT ''
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.5ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_auth_token" ON "users" ("auth_token")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206035714"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
Migrating to AddIsPrimaryToUserAndRemovePrimaryUserIdFromOrganisation (20151206112033)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "is_primary" boolean DEFAULT 'f'[0m
  [1m[35m (0.2ms)[0m  CREATE TEMPORARY TABLE "aorganisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user_id" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "tindex_aorganisations_on_primary_user_id" ON "aorganisations" ("primary_user_id")[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "tindex_aorganisations_on_deleted_at" ON "aorganisations" ("deleted_at")
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "organisations"[0m
  [1m[35m (0.3ms)[0m  DROP TABLE "organisations"
  [1m[36m (0.1ms)[0m  [1mCREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) [0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='tindex_aorganisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_aorganisations_on_deleted_at' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='tindex_aorganisations_on_primary_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_aorganisations_on_primary_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "aorganisations"[0m
  [1m[35m (0.2ms)[0m  DROP TABLE "aorganisations"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151206112033"]]
  [1m[35m (1.8ms)[0m  commit transaction
Migrating to AddConfirmableToDevise (20151206134750)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206134750"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
Migrating to DeleteUsers (20151206135859)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206135859"]]
  [1m[36m (4.1ms)[0m  [1mcommit transaction[0m
Migrating to DeviseTokenAuthCreateUsers (20151206140817)
  [1m[35m (0.1ms)[0m  begin transaction
DEPRECATION WARNING: `#timestamps` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /Users/timi/gigster-locent-api/db/migrate/20151206140817_devise_token_auth_create_users.rb:44)
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar DEFAULT 'email' NOT NULL, "uid" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "confirmation_token" varchar, "confirmed_at" datetime, "confirmation_sent_at" datetime, "unconfirmed_email" varchar, "first_name" varchar, "last_name" varchar, "email" varchar, "tokens" text, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_users_on_email" ON "users" ("email")
  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  CREATE UNIQUE INDEX "index_users_on_uid_and_provider" ON "users" ("uid", "provider")
  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206140817"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
Migrating to AddOrganisationIdToUser (20151206164658)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "users" ADD "organisation_id" integer[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD "is_primary" boolean DEFAULT 'f'
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151206164658"]]
  [1m[35m (1.7ms)[0m  commit transaction
Migrating to CreateProducts (20151206182109)
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "has_items" boolean DEFAULT 'f', "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151206182109"]]
  [1m[35m (1.5ms)[0m  commit transaction
Migrating to CreateSubscriptions (20151206190416)
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_id" integer, "product_id" integer, "short_code" integer, "option_id" varchar, "option_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151206190416"]]
  [1m[35m (1.8ms)[0m  commit transaction
Migrating to CreateKeyWordOptions (20151207063309)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "keyword_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151207063309"]]
  [1m[35m (2.0ms)[0m  commit transaction
Migrating to AddDeletedAtToProductsSubscriptionsAndKeyWordOptions (20151207081957)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "products" ADD "deleted_at" datetime
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_products_on_deleted_at" ON "products" ("deleted_at")[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "subscriptions" ADD "deleted_at" datetime
  [1m[36m (0.2ms)[0m  [1mCREATE  INDEX "index_subscriptions_on_deleted_at" ON "subscriptions" ("deleted_at")[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "keyword_options" ADD "deleted_at" datetime
  [1m[36m (0.3ms)[0m  [1mCREATE  INDEX "index_keyword_options_on_deleted_at" ON "keyword_options" ("deleted_at")[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207081957"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
Migrating to CreateClearCartOptions (20151207083656)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "clearcart_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "intial_cart_abandonment_message" text, "follow_up_message" text, "cancellation_message" text, "confirmation_message" text, "number_of_times_to_message" integer, "time_interval_between_messages" integer, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207083656"]]
  [1m[36m (2.2ms)[0m  [1mcommit transaction[0m
Migrating to CreateSafeTextOptions (20151207085210)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "safetext_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207085210"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[36m (1.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateOrganisations (20151204154935)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151204154935"]]
  [1m[35m (1.5ms)[0m  commit transaction
Migrating to DeviseCreateUsers (20151204163514)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "first_name" varchar, "last_name" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (1.1ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151204163514"]]
  [1m[36m (2.8ms)[0m  [1mcommit transaction[0m
Migrating to ChangePrimaryUserToPrimaryUserId (20151205114111)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mCREATE TEMPORARY TABLE "aorganisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user_id" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.0ms)[0m  SELECT * FROM "organisations"
  [1m[36m (0.2ms)[0m  [1mDROP TABLE "organisations"[0m
  [1m[35m (0.3ms)[0m  CREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user_id" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "aorganisations"[0m
  [1m[35m (0.4ms)[0m  DROP TABLE "aorganisations"
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151205114111"]]
  [1m[35m (2.1ms)[0m  commit transaction
Migrating to AddOrganisationIdToUsers (20151205133938)
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "users" ADD "organisation_id" integer
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151205133938"]]
  [1m[35m (1.4ms)[0m  commit transaction
Migrating to AddDeletedAtToOrganisationsAndUsers (20151206030525)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "organisations" ADD "deleted_at" datetime
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "users" ADD "deleted_at" datetime
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.2ms)[0m  [1mCREATE  INDEX "index_users_on_deleted_at" ON "users" ("deleted_at")[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206030525"]]
  [1m[36m (2.3ms)[0m  [1mcommit transaction[0m
Migrating to AddIndexesToOrganisationsAndUsers (20151206030931)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  CREATE  INDEX "index_users_on_organisation_id" ON "users" ("organisation_id")
  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_organisations_on_primary_user_id" ON "organisations" ("primary_user_id")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151206030931"]]
  [1m[35m (1.3ms)[0m  commit transaction
Migrating to AddAuthenticationTokenToUsers (20151206035714)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD "auth_token" varchar DEFAULT ''
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_organisation_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_organisation_id' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_deleted_at' AND type='index'

  [1m[36m (0.0ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.3ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_auth_token" ON "users" ("auth_token")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206035714"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
Migrating to AddIsPrimaryToUserAndRemovePrimaryUserIdFromOrganisation (20151206112033)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "users" ADD "is_primary" boolean DEFAULT 'f'[0m
  [1m[35m (0.3ms)[0m  CREATE TEMPORARY TABLE "aorganisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "primary_user_id" integer, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) 
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_primary_user_id' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "tindex_aorganisations_on_primary_user_id" ON "aorganisations" ("primary_user_id")[0m
  [1m[35m (0.3ms)[0m  CREATE  INDEX "tindex_aorganisations_on_deleted_at" ON "aorganisations" ("deleted_at")
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "organisations"[0m
  [1m[35m (1.1ms)[0m  DROP TABLE "organisations"
  [1m[36m (0.2ms)[0m  [1mCREATE TABLE "organisations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_name" varchar, "email" varchar, "client_key" varchar, "phone" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, "deleted_at" datetime) [0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='tindex_aorganisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_aorganisations_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='tindex_aorganisations_on_primary_user_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='tindex_aorganisations_on_primary_user_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_organisations_on_deleted_at" ON "organisations" ("deleted_at")
  [1m[36m (0.1ms)[0m  [1mSELECT * FROM "aorganisations"[0m
  [1m[35m (0.1ms)[0m  DROP TABLE "aorganisations"
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151206112033"]]
  [1m[35m (1.7ms)[0m  commit transaction
Migrating to AddConfirmableToDevise (20151206134750)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206134750"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
Migrating to DeleteUsers (20151206135859)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206135859"]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
Migrating to DeviseTokenAuthCreateUsers (20151206140817)
  [1m[35m (0.1ms)[0m  begin transaction
DEPRECATION WARNING: `#timestamps` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in change at /Users/timi/gigster-locent-api/db/migrate/20151206140817_devise_token_auth_create_users.rb:45)
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "provider" varchar DEFAULT 'email' NOT NULL, "uid" varchar DEFAULT '' NOT NULL, "encrypted_password" varchar DEFAULT '' NOT NULL, "reset_password_token" varchar, "reset_password_sent_at" datetime, "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar, "last_sign_in_ip" varchar, "confirmation_token" varchar, "confirmed_at" datetime, "confirmation_sent_at" datetime, "unconfirmed_email" varchar, "first_name" varchar, "last_name" varchar, "email" varchar, "deleted_at" datetime, "tokens" text, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (0.1ms)[0m  CREATE  INDEX "index_users_on_email" ON "users" ("email")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[35m (0.8ms)[0m  CREATE UNIQUE INDEX "index_users_on_uid_and_provider" ON "users" ("uid", "provider")
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
[0m
  [1m[35m (0.0ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'

  [1m[36m (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151206140817"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Migrating to AddOrganisationIdToUser (20151206164658)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.9ms)[0m  [1mALTER TABLE "users" ADD "organisation_id" integer[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "users" ADD "is_primary" boolean DEFAULT 'f'
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151206164658"]]
  [1m[35m (1.8ms)[0m  commit transaction
Migrating to CreateProducts (20151206182109)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (1.0ms)[0m  CREATE TABLE "products" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "has_items" boolean DEFAULT 'f', "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151206182109"]]
  [1m[35m (1.8ms)[0m  commit transaction
Migrating to CreateSubscriptions (20151206190416)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.4ms)[0m  CREATE TABLE "subscriptions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "organisation_id" integer, "product_id" integer, "short_code" integer, "option_id" varchar, "option_type" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151206190416"]]
  [1m[35m (1.5ms)[0m  commit transaction
Migrating to CreateKeyWordOptions (20151207063309)
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "keyword_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151207063309"]]
  [1m[35m (9.6ms)[0m  commit transaction
Migrating to AddDeletedAtToProductsSubscriptionsAndKeyWordOptions (20151207081957)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "products" ADD "deleted_at" datetime
  [1m[36m (0.2ms)[0m  [1mCREATE  INDEX "index_products_on_deleted_at" ON "products" ("deleted_at")[0m
  [1m[35m (0.1ms)[0m  ALTER TABLE "subscriptions" ADD "deleted_at" datetime
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_subscriptions_on_deleted_at" ON "subscriptions" ("deleted_at")[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "keyword_options" ADD "deleted_at" datetime
  [1m[36m (0.1ms)[0m  [1mCREATE  INDEX "index_keyword_options_on_deleted_at" ON "keyword_options" ("deleted_at")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207081957"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
Migrating to CreateClearCartOptions (20151207083656)
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mCREATE TABLE "clearcart_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "intial_cart_abandonment_message" text, "follow_up_message" text, "cancellation_message" text, "confirmation_message" text, "number_of_times_to_message" integer, "time_interval_between_messages" integer, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207083656"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
Migrating to CreateSafeTextOptions (20151207085210)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "safetext_options" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "opt_in_message" text, "opt_in_refusal_message" text, "welcome_message" text, "transactional_message" text, "cancellation_message" text, "confirmation_message" text, "deleted_at" datetime, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151207085210"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_keyword_options_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_organisations_on_deleted_at' AND type='index'

  [1m[36m (0.3ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_products_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_products_on_deleted_at' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_subscriptions_on_deleted_at' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_reset_password_token' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_uid_and_provider' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_users_on_email' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_users_on_email' AND type='index'
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mProduct Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Keyword' AND "products"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "products" ("name", "has_items", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["name", "Keyword"], ["has_items", "t"], ["created_at", "2015-12-07 09:39:19.376709"], ["updated_at", "2015-12-07 09:39:19.376709"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mProduct Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Clearcart' AND "products"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Clearcart"], ["created_at", "2015-12-07 09:39:19.380978"], ["updated_at", "2015-12-07 09:39:19.380978"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mProduct Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Safetext' AND "products"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "products" ("name", "created_at", "updated_at") VALUES (?, ?, ?)  [["name", "Safetext"], ["created_at", "2015-12-07 09:39:19.385076"], ["updated_at", "2015-12-07 09:39:19.385076"]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mProduct Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Keyword' AND "products"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mProduct Exists (0.1ms)[0m  SELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Clearcart' AND "products"."deleted_at" IS NULL) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mProduct Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "products" WHERE ("products"."name" = 'Safetext' AND "products"."deleted_at" IS NULL) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction


Started POST "/dashboard/organisations" for ::1 at 2015-12-07 10:40:49 +0100
Processing by Dashboard::V1::OrganisationsController#create as JSON
  Parameters: {"organisation_name"=>"OrderToLagos", "email"=>"timi@ordertolagos.com", "password"=>"[FILTERED]", "first_name"=>"timi", "last_name"=>"badman"}
Unpermitted parameters: password, first_name, last_name, format
Unpermitted parameters: organisation_name, format
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."provider" = ? AND "users"."email" = ?[0m  [["provider", "email"], ["email", "timi@ordertolagos.com"]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."deleted_at" IS NULL AND "users"."confirmation_token" = ?  ORDER BY "users"."id" ASC LIMIT 1  [["confirmation_token", "ac043bb10659a93828c5a356ef76e6289a174926bbee111130e1b430b5898368"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("first_name", "last_name", "email", "encrypted_password", "is_primary", "tokens", "uid", "created_at", "updated_at", "confirmation_token", "confirmation_sent_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)[0m  [["first_name", "timi"], ["last_name", "badman"], ["email", "timi@ordertolagos.com"], ["encrypted_password", "$2a$10$PYvvoDh7EK0//imuzJ1xq.65q1Rxx4.k09i/Q47LSLY8d7qTxUcD2"], ["is_primary", "t"], ["tokens", "{}"], ["uid", "timi@ordertolagos.com"], ["created_at", "2015-12-07 09:40:49.427937"], ["updated_at", "2015-12-07 09:40:49.427937"], ["confirmation_token", "wQVgVaFuxWo2vrCedVfk"], ["confirmation_sent_at", "2015-12-07 09:40:49.639723"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mOrganisation Exists (0.2ms)[0m  SELECT  1 AS one FROM "organisations" WHERE ("organisations"."organisation_name" = 'OrderToLagos' AND "organisations"."deleted_at" IS NULL) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "organisations" ("organisation_name", "email", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["organisation_name", "OrderToLagos"], ["email", "timi@ordertolagos.com"], ["created_at", "2015-12-07 09:40:49.648004"], ["updated_at", "2015-12-07 09:40:49.648004"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "users" SET "organisation_id" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["organisation_id", 1], ["updated_at", "2015-12-07 09:40:49.649811"], ["id", 1]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
Completed 201 Created in 336ms (Views: 12.0ms | ActiveRecord: 5.7ms)


Started POST "/dashboard/subscriptions" for ::1 at 2015-12-07 10:41:00 +0100
Processing by Dashboard::V1::SubscriptionsController#create as JSON
  Parameters: {"organisation_id"=>"1", "product_ids"=>"1,2,3"}
  [1m[35mProduct Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."deleted_at" IS NULL AND "products"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.4ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."product_id" = 1) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["organisation_id", 1], ["product_id", 1], ["created_at", "2015-12-07 09:41:00.648257"], ["updated_at", "2015-12-07 09:41:00.648257"]]
  [1m[35m (1.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.1ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."id" != 1 AND "subscriptions"."product_id" = 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "keyword_options" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-12-07 09:41:00.653787"], ["updated_at", "2015-12-07 09:41:00.653787"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "subscriptions" SET "option_type" = ?, "option_id" = ?, "updated_at" = ? WHERE "subscriptions"."id" = ?  [["option_type", "KeywordOptions"], ["option_id", "1"], ["updated_at", "2015-12-07 09:41:00.655252"], ["id", 1]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35mProduct Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."deleted_at" IS NULL AND "products"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.3ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."product_id" = 2) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["organisation_id", 1], ["product_id", 2], ["created_at", "2015-12-07 09:41:00.680388"], ["updated_at", "2015-12-07 09:41:00.680388"]]
  [1m[35m (1.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.1ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."id" != 2 AND "subscriptions"."product_id" = 2) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "clearcart_options" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-12-07 09:41:00.688450"], ["updated_at", "2015-12-07 09:41:00.688450"]]
  [1m[35mSQL (0.1ms)[0m  UPDATE "subscriptions" SET "option_type" = ?, "option_id" = ?, "updated_at" = ? WHERE "subscriptions"."id" = ?  [["option_type", "ClearcartOptions"], ["option_id", "1"], ["updated_at", "2015-12-07 09:41:00.689661"], ["id", 2]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  [1m[35mProduct Load (0.1ms)[0m  SELECT  "products".* FROM "products" WHERE "products"."deleted_at" IS NULL AND "products"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.1ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."product_id" = 3) LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "subscriptions" ("organisation_id", "product_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["organisation_id", 1], ["product_id", 3], ["created_at", "2015-12-07 09:41:00.708037"], ["updated_at", "2015-12-07 09:41:00.708037"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSubscription Exists (0.2ms)[0m  SELECT  1 AS one FROM "subscriptions" WHERE ("subscriptions"."organisation_id" = 1 AND "subscriptions"."deleted_at" IS NULL AND "subscriptions"."id" != 3 AND "subscriptions"."product_id" = 3) LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "safetext_options" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", "2015-12-07 09:41:00.712708"], ["updated_at", "2015-12-07 09:41:00.712708"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "subscriptions" SET "option_type" = ?, "option_id" = ?, "updated_at" = ? WHERE "subscriptions"."id" = ?  [["option_type", "SafetextOptions"], ["option_id", "1"], ["updated_at", "2015-12-07 09:41:00.716396"], ["id", 3]]
  [1m[36m (2.2ms)[0m  [1mcommit transaction[0m
Completed 201 Created in 119ms (Views: 3.4ms | ActiveRecord: 16.6ms)
